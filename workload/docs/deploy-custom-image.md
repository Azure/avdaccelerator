# Azure Virtual Desktop LZA - Custom Image Build - Deployment walk through

| Portal UI Experience (ARM) |
| ------------------------------------------------------------ |
| [![Deploy to Azure](https://aka.ms/deploytoazurebutton)](https://portal.azure.com/#blade/Microsoft_Azure_CreateUIDef/CustomDeploymentBlade/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Favdaccelerator%main%2Fworkload%2Farm%2Fdeploy-custom-image.json/uiFormDefinitionUri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Favdaccelerator%main%2Fworkload%2Fportal-ui%2Fportal-ui-custom-image.json) [![Deploy to Azure Gov](https://aka.ms/deploytoazuregovbutton)](https://portal.azure.us/#blade/Microsoft_Azure_CreateUIDef/CustomDeploymentBlade/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Favdaccelerator%main%2Fworkload%2Farm%2Fdeploy-custom-image.json/uiFormDefinitionUri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Favdaccelerator%main%2Fworkload%2Fportal-ui%2Fportal-ui-custom-image.json) |

- **Basics** blade:
  - **Subscription** - The subscription where the accelerator is going to deploy the resources.
  - **Region** â€“ The desired Azure Region to be used for the deployment.
- **Image Management** blade:
  - **Storage account type** - Select storage account type option between Standard Locally-Redundant Storage or Standard Zone-Redundant Storage (when available).
  - **Enable replication to disaster recovery location** - Select if creating image version replica in another region (DR Location).
  - **Disaster recovery location** - When replicating image version, select the region where the image will be replicated.
  - **Operating system version** - Select the Image OS SKU to be used as source for the image.
- **Azure Image Builder (AIB)** blade:
  - **Deployment location** - Select the location where Azure Image Builder will run to create the image.
  - **Build schedule** - Select if custom image will be built "OneTime" or "Recurring" to create a schedule and run the build every time a new source image is available.
  - **Existing virtual network** - select the checkbox to use existing virtual network or "No" for the AIB process to create a temporary one that is deleted once the build is completed.
  - **Enable RDP shortpath for managed networks** - Select if enabling RDP Short Path on the custom image registry.
  - **Enable screen capture protection** - Select if enabling Screen Capture Protection on the custom image registry.
- **Monitoring** blade:
  - **Enable monitoring & alerting** - Select if enabling monitoring and alerts.
  - **Distribution group** - Input the distribution group for receiving alerts (emails) on the build status.
  - **Existing log analytics workspace** - Select if using existing log analytics workspace selecting the checkbox.
- **Resource naming** blade:
  - **Custom resource naming** - select the checkbox to input names for the resources. when not selecting the checkbox, the deployment will use the Azure Virtual Desktop accelerator naming standard.
- **Resource tagging** blade:
  - **Custom resource tags** - select the checkbox to provide information that will be used to create tags on resources and resource groups.

Take a look at the [Naming Standard and Tagging](./resource-naming.md) page for further information.

## Other deployment Options

We have these other options available:

| Deployment Type | Link |
|:--|:--|
|Command line (Bicep/ARM) |[![Powershell/Azure CLI](./icons/powershell.png)](https://github.com/Azure/avdaccelerator/blob/main/workload/bicep/readme.md) |
|Terraform |[![Terraform](./icons/terraform.png)]( https://github.com/Azure/avdaccelerator/tree/main/workload/terraform/customimage) |

## Next Steps

- After successful deployment, you can remove the temporary resource group (IT_rg-avd-eus-shared-services_avd_image_<AutoGeneratedID>) and its resources that was used to provision the custom image

## Known Issues

Please report issues using the projects [issues](https://github.com/Azure/avdaccelerator/issues) tracker
