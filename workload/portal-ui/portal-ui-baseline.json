{
    "$schema": "<relative path to createFormUI.schema.json>",
    "view": {
        "kind": "Form",
        "properties": {
            "isWizard": false,
            "title": "AVD landing zone accelerator - Baseline",
            "steps": [
                {
                    "name": "basics",
                    "label": "Azure core setup",
                    "subLabel": {
                        "preValidation": "Provide deployment prefix for the resource groups and resources that will be created.",
                        "postValidation": "Done"
                    },
                    "bladeTitle": "avdBasics",
                    "elements": [
                        {
                            "name": "avdSharedServices",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "Workload services baseline deployment",
                            "elements": [
                                {
                                    "name": "info",
                                    "type": "Microsoft.Common.InfoBox",
                                    "options": {
                                        "text": "Subscription and location selected in this step, will be used to deploy AVD workload Landing Zone resources (Application group, host pool, workspace, key vaults, storage, VMs etc.).",
                                        "style": "Info"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdDeploymentScope",
                            "type": "Microsoft.Common.ResourceScope",
                            "location": {
                                "resourceTypes": []
                            }
                        },
                        {
                            "name": "avdWorkloadSubscription",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "Azure AVD Landing Zones will create the resource group hierarchy under the subscriptions with the prefix provided at this step.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://docs.microsoft.com/azure/cloud-adoption-framework/ready/enterprise-scale/management-group-and-subscription-organization"
                                }
                            }
                        },
                        {
                            "name": "avdDeploymentPrefix",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Deployment prefix",
                            "toolTip": "Provide a prefix (max 4 characters) for the resource groups and resources created as part of AVD landing zones.",
                            "placeholder": "Example: app1",
                            "constraints": {
                                "required": true,
                                "regex": "^[a-z0-9A-Z-]{1,4}$",
                                "validationMessage": "The prefix must be 1-4 characters."
                            }
                        },
                        {
                            "name": "roleinfo",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "Azure AVD Landing Zones ARM deployment requires owner access at the subscription scope. Visit this link to get more information on RBAC permissions and scopes.",
                                "uri": "https://docs.microsoft.com/en-us/azure/role-based-access-control/scope-overview",
                                "style": "Warning"
                            }
                        }
                    ]
                },
                {
                    "name": "avdIdentity",
                    "label": "Identity provider",
                    "subLabel": {
                        "preValidation": "",
                        "postValidation": ""
                    },
                    "bladeTitle": "avdIdentitySettings",
                    "elements": [
                        {
                            "name": "identityInfo",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "AVD landing zone accelerator deployment expects identity service to be already available in the current Azure estate.",
                                "uri": "https://docs.microsoft.com/azure/virtual-desktop/authentication#identities",
                                "style": "Info"
                            }
                        },
                        {
                            "name": "avdIdentityDomainInformation",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "Domain information",
                            "elements": [
                                {
                                    "name": "avdIdentityServiceProvider",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "visible": true,
                                    "label": "Identity service provider",
                                    "defaultValue": "Active Directory (AD DS)",
                                    "toolTip": "Identity service provider (ADDS or AADDS) that already exist and will be used for Azure Virtual Desktop.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Active Directory (AD DS)",
                                                "value": "ADDS"
                                            },
                                            {
                                                "label": "Azure AD Domain Services (AAD DS)",
                                                "value": "AADDS"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdIdentityDomainName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Domain name",
                                    "toolTip": "Provide username with permissions to join session host to the domain.",
                                    "placeholder": "Example: contoso.com",
                                    "constraints": {
                                        "required": true
                                    }
                                },
                                {
                                    "name": "avdIdentityServiceProviderInfo",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": true,
                                    "options": {
                                        "text": "Identity service provider must already exist, as they are a prerequisite for the AVD accelerator deployment.",
                                        "uri": "https://github.com/Azure/avdaccelerator/wiki/Getting-Started",
                                        "style": "Info"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdIdentityDomainCredentials",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "Domain join credentials",
                            "elements": [
                                {
                                    "name": "avdIdentityDomainJoinUserName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Username",
                                    "toolTip": "Provide username with permissions to join session host to the domain.",
                                    "placeholder": "Example: avdadmin@contoso.com",
                                    "defaultValue": "",
                                    "constraints": {
                                        "required": true
                                    }
                                },
                                {
                                    "name": "avdIdentityDomainJoinUserPassword",
                                    "type": "Microsoft.Common.PasswordBox",
                                    "visible": true,
                                    "label": {
                                        "password": "Password"
                                    },
                                    "toolTip": "Provide password for domain join account.",
                                    "constraints": {
                                        "required": true
                                    },
                                    "options": {
                                        "hideConfirmation": false
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdIdentityLocalCredentials",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "Session host local admin credentials",
                            "elements": [
                                {
                                    "name": "avdIdentityLocalUserName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Username",
                                    "toolTip": "Provide username for session host local admin account.",
                                    "placeholder": "Example: avdadmin",
                                    "defaultValue": "",
                                    "constraints": {
                                        "required": true
                                    }
                                },
                                {
                                    "name": "avdIdentityLocalUserPassword",
                                    "type": "Microsoft.Compute.CredentialsCombo",
                                    "visible": true,
                                    "label": {
                                        "password": "Password",
                                        "confirmPassword": "Confirm password"
                                    },
                                    "toolTip": {
                                        "password": "The password must be alphanumeric, contain at least 12 characters, have at least 1 letter,1 number and 1 special character."
                                    },
                                    "constraints": {
                                        "required": true,
                                        "customPasswordRegex": "^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=_!*<>()])(?=\\S+$).{12,123}$",
                                        "customValidationMessage": "Password must include 1 special character."
                                    },
                                    "options": {
                                        "hideConfirmation": false
                                    },
                                    "osPlatform": "Windows"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "avdManagementPlane",
                    "label": "Management plane",
                    "subLabel": {
                        "preValidation": "",
                        "postValidation": ""
                    },
                    "bladeTitle": "avdManagementPlane",
                    "elements": [
                        {
                            "name": "avdManagementPlanelocation",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "Location for: workspace, host pool and application groups metadata",
                            "elements": [
                                {
                                    "name": "avdManagementPlaneLocation",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": true,
                                    "label": "Deployment location",
                                    "defaultValue": "equals(steps('basics').avdDeploymentScope.location.displayName)",
                                    "toolTip": "Select region where AVD workspace, host pool and application groups will be created.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Canada Central",
                                                "value": "canadacentral"
                                            },
                                            {
                                                "label": "Canada East",
                                                "value": "canadaeast"
                                            },
                                            {
                                                "label": "Central US",
                                                "value": "centralus"
                                            },
                                            {
                                                "label": "East US",
                                                "value": "eastus"
                                            },
                                            {
                                                "label": "East US 2",
                                                "value": "eastus2"
                                            },
                                            {
                                                "label": "North Central US",
                                                "value": "northcentralus"
                                            },
                                            {
                                                "label": "North Europe",
                                                "value": "northeurope"
                                            },
                                            {
                                                "label": "South Central US",
                                                "value": "southcentralus"
                                            },
                                            {
                                                "label": "UK South",
                                                "value": "uksouth"
                                            },
                                            {
                                                "label": "UK West",
                                                "value": "ukwest"
                                            },
                                            {
                                                "label": "West Central US",
                                                "value": "westcentralus"
                                            },
                                            {
                                                "label": "West Europe",
                                                "value": "westeurope"
                                            },
                                            {
                                                "label": "West India",
                                                "value": "westindia"
                                            },
                                            {
                                                "label": "West US",
                                                "value": "westus"
                                            },
                                            {
                                                "label": "West US 2",
                                                "value": "westus2"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "name": "hostPoolInfo",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "Select the location where management plane resources (workspace, host pool, application groups) will be deployed, this resources are not available in all locations but are globally replicated and they can share the same location as the session hosts or not.",
                                "uri": "https://docs.microsoft.com/en-us/azure/virtual-desktop/data-locations",
                                "style": "Info"
                            }
                        },
                        {
                            "name": "avdManagementPlaneHostPoolSettings",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "Host pool settings",
                            "elements": [
                                {
                                    "name": "hostPoolType",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": true,
                                    "label": "Host pool type",
                                    "defaultValue": "Pooled",
                                    "multiLine": true,
                                    "toolTip": "",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Pooled",
                                                "description": "",
                                                "value": "Pooled"
                                            },
                                            {
                                                "label": "Personal",
                                                "description": "",
                                                "value": "Personal"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "subWarning",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": true,
                                    "options": {
                                        "icon": "Warning",
                                        "text": "Host pool type can not be changed after deployment.",
                                        "uri": "https://docs.microsoft.com/en-us/azure/virtual-desktop/environment-setup"
                                    }
                                },
                                {
                                    "name": "loadBalancerType",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": "[equals(steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.hostPoolType, 'Pooled')]",
                                    "label": "Load balancer",
                                    "defaultValue": "BreadthFirst",
                                    "multiLine": true,
                                    "toolTip": "Breadth-first load balancing distributes new user sessions across all available session hosts in the host pool. Depth-first load balancing distributes new user sessions to an available session host with the highest number of connections but has not reached its maximum session limit threshold.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "BreadthFirst",
                                                "description": "Each new user is placed on the next VM. (Performance Optimized)",
                                                "value": "BreadthFirst"
                                            },
                                            {
                                                "label": "DepthFirst",
                                                "description": "Each new user is placed on the same VM until max sessions limit. (Cost Optimized)",
                                                "value": "DepthFirst"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "maxSessions",
                                    "type": "Microsoft.Common.TextBox",
                                    "visible": "[equals(steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.hostPoolType, 'Pooled')]",
                                    "label": "Max sessions",
                                    "defaultValue": "10",
                                    "toolTip": "The maximum number of users that have concurrent sessions on a session host. When setting a host pool to have depth first load balancing or planning to use Autoscaling, you must set an appropriate max session limit according to the configuration of your deployment and capacity of your VMs.",
                                    "constraints": {
                                        "required": false,
                                        "regex": "",
                                        "validationMessage": ""
                                    }
                                },
                                {
                                    "name": "assignmentType",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": "[equals(steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.hostPoolType, 'Personal')]",
                                    "label": "Machine assignment",
                                    "defaultValue": "Automatic (Recommended)",
                                    "multiLine": true,
                                    "toolTip": "Automatic assignment – The service will select an available host and assign it to an user. Direct assignment – Admin selects a specific host to assign to an user.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Automatic (Recommended)",
                                                "description": "Users are assigned an available VM the first time they connect.",
                                                "value": "Automatic"
                                            },
                                            {
                                                "label": "Direct",
                                                "description": "An administrator assigns a VM for each individual user.",
                                                "value": "Direct"
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdManagementPlaneAppGroupOptions",
                            "type": "Microsoft.Common.Section",
                            "visible": "[equals(steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.hostPoolType, 'Pooled')]",
                            "label": "Application group options (Desktop application group will be deployed by default)",
                            "elements": [
                                {
                                    "name": "avdDeployRappGroup",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "visible": true,
                                    "label": "Create remote app group",
                                    "defaultValue": "Yes (Recommended)",
                                    "toolTip": "This application group type allows to publish seamless apps instead of full desktops.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Yes (Recommended)",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdManagementPlaneHostPoolScaling",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "Session host scaling options",
                            "elements": [
                                {
                                    "name": "startVmOnConnect",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "visible": true,
                                    "label": "Start VM on connect",
                                    "defaultValue": "Yes (Recommended)",
                                    "toolTip": "If powered off, start VM once user connects. ",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Yes (Recommended)",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "createVmRole",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "visible": "[equals(steps('avdManagementPlane').avdManagementPlaneHostPoolScaling.startVmOnConnect, true)]",
                                    "label": "Create start VM on connect role",
                                    "defaultValue": "Yes (Required if using Start VM On Connect)",
                                    "toolTip": "Create custom Azure IAM role for Start VM on Connect",
                                    "constraints": {
                                        "required": false,
                                        "allowedValues": [
                                            {
                                                "label": "Yes (Required if using Start VM On Connect)",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdEnterApplication",
                                    "type": "Microsoft.Common.TextBox",
                                    "visible": "[equals(steps('avdManagementPlane').avdManagementPlaneHostPoolScaling.startVmOnConnect, true)]",
                                    "label": "AVD enterprise application ObjectID",
                                    "defaultValue": "",
                                    "toolTip": "Provide the ObjectID of the enterprise application Azure Virtual Desktop (ApplicationID: 9cdead84-a844-4324-93f2-b2e6bb768d07).",
                                    "constraints": {
                                        "required": true
                                    }
                                },
                                {
                                    "name": "vmRoleWarning",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[equals(steps('avdManagementPlane').avdManagementPlaneHostPoolScaling.createVmRole, false)]",
                                    "options": {
                                        "text": "Start VM on Connect will not work without a custom role definition. If you enable start on connect, but do not specify a custom role VM's will not start on-demand. Only select no if this custom role already exists and is assigned to your AVD subscription.",
                                        "uri": "https://docs.microsoft.com/en-us/azure/virtual-desktop/start-virtual-machine-connect",
                                        "style": "Warning"
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "avdSessionHosts",
                    "label": "Session hosts",
                    "subLabel": {
                        "preValidation": "",
                        "postValidation": ""
                    },
                    "bladeTitle": "avdSessionHosts",
                    "elements": [
                        {
                            "name": "avdDeploySessionHosts",
                            "type": "Microsoft.Common.OptionsGroup",
                            "visible": true,
                            "label": "Deploy session hosts",
                            "defaultValue": "Yes",
                            "toolTip": "Create session hosts compute and storage resources.",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": true
                                    },
                                    {
                                        "label": "No",
                                        "value": false
                                    }
                                ]
                            }
                        },
                        {
                            "name": "avdSessionHostsComputeStorageSection",
                            "type": "Microsoft.Common.Section",
                            "visible": "[equals(steps('avdSessionHosts').avdDeploySessionHosts, true)]",
                            "label": "General settings",
                            "tooltip": "This settings apply to compute, storage, image management and key vault resources.",
                            "elements": [
                                {
                                    "name": "avdIdentityDomainOuPath",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Session hosts OU path (Optional)",
                                    "toolTip": "Provide OU where to locate session hosts, if not provided session hosts will be placed on the default (computers) OU.",
                                    "placeholder": "Example: OU=session-hosts,OU=avd,DC=contoso,DC=com",
                                    "constraints": {}
                                },
                                { 
                                    "name": "avdSessionHostsAvailabilitySettings",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "label": "Use availability zones",
                                    "defaultValue": "No",
                                    "toolTip": "Distribute compute and storage resources across availability zones. When selecting No a availability set will be created to host the VMs.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Yes",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdFslogixDeployment",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "label": "Use FSLogix profile management",
                                    "defaultValue": "Yes",
                                    "toolTip": "Deploys FSLogix containers and session host setup for user's profiles.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Yes",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdIdentityDomainOuPathBool",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "visible": "[equals (steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true)]",
                                    "label": "Create OU for storage (fslogix)",
                                    "defaultValue": "No",
                                    "toolTip": "It is recommended to create a new AD Organizational Unit (OU) in AD and disable password expiration policy on computer accounts or service logon accounts accordingly.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Yes",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    }
                                },
								{
                                    "name": "avdIdentityDomainOuPathStorage",
                                    "type": "Microsoft.Common.TextBox",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdIdentityDomainOuPathBool, true)]",
                                    "label": "New storage OU name",
                                    "toolTip": "OU will be created and used to locate storage account file share.",
                                    "placeholder": "Example: avdstorage",
                                    "constraints": {
                                        "required": true
                                    }
                                },	
                                {
                                    "name": "avdIdentityDomainOuPathStorageExisting",
                                    "type": "Microsoft.Common.TextBox",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdIdentityDomainOuPathBool, false)]",
                                    "label": "Existing storage OU path (Optional)",
                                    "toolTip": "Provide OU where to locate storage account file share, if not provided session hosts will be placed on the default (computers) OU.",
                                    "placeholder": "Example: OU=storage,OU=avd,DC=contoso,DC=com",
                                    "constraints": {}
                                },
                                {
                                    "name": "avdStorageAccountSku",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": "[equals (steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true)]",
                                    "label": "File share sku",
                                    "filter": true,
                                    "defaultValue": "Premium_LRS",
                                    "toolTip": "Storage account SKU for FSLogix storage. Recommended tier is Premium_ZRS when avaiable otherwise Premium_LRS.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Premium_LRS",
                                                "description": "",
                                                "value": "Premium_LRS"
                                            },
                                            {
                                                "label": "Premium_ZRS (When available)",
                                                "description": "",
                                                "value": "Premium_ZRS"
                                            },
                                            {
                                                "label": "Standard_LRS",
                                                "description": "",
                                                "value": "Standard_LRS"
                                            },
                                            {
                                                "label": "Standard_ZRS (When available)",
                                                "description": "",
                                                "value": "Standard_ZRS"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdSessionHostsFslogixFileShareQuota",
                                    "type": "Microsoft.Common.Slider",
                                    "visible": "[equals (steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true)]",
                                    "label": "File share size",
                                    "subLabel": "x 100GB",
                                    "toolTip": "Size of Premium File share storage in 10GB increments",
                                    "min": 1,
                                    "max": 100,
                                    "defaultValue": 1,
                                    "showStepMarkers": true,
                                    "constraints": {
                                        "required": true
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdSessionHostsSettingsSection",
                            "type": "Microsoft.Common.Section",
                            "visible": "[equals(steps('avdSessionHosts').avdDeploySessionHosts, true)]",
                            "label": "Session hosts settings",
                            "elements": [
                                {
                                    "name": "element1",
                                    "type": "Microsoft.Compute.SizeSelector",
                                    "label": "VM Size",
                                    "toolTip": "",
                                    "recommendedSizes": [
                                        "Standard_D2s_v3"
                                    ],
                                    "constraints": {
                                        "allowedSizes": [],
                                        "excludedSizes": [],
                                        "required": true
                                    },
                                    "options": {
                                        "hideDiskTypeFilter": true
                                    },
                                    "osPlatform": "Windows",
                                    "imageReference": {
                                        "publisher": "MicrosoftWindowsDesktop",
                                        "offer": "Windows-11",
                                        "sku": "21h2-avd"
                                    }
                                },
                                {
                                    "name": "avdSessionHostsCount",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "VM count",
                                    "toolTip": "Provide the number of session hosts to deploy (1-49).",
                                    "defaultValue": 1,
                                    "constraints": {
                                        "required": true,
                                        "regex": "^([1-9]|[1-4][0-9])$",
                                        "validationMessage": "The count must be between 1-49 session hosts."
                                    }
                                },
                                {
                                    "name": "avdSessionHostDiskType",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "OS Disk type",
                                    "filter": true,
                                    "defaultValue": "Standard",
                                    "toolTip": "Select session host disk type to host the OS.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Standard",
                                                "value": "Standard_LRS"
                                            },
                                            {
                                                "label": "Premium",
                                                "value": "Premium_LRS"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdSessionHostEncryptionAtHost",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "label": "End to end encryption (encryptionAtHost)",
                                    "defaultValue": "No",
                                    "toolTip": "When you enable encryption at host, data stored on the VM host is encrypted at rest and flows encrypted to the Storage service. For conceptual information on encryption at host, and other managed disk encryption types.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Yes",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdSessionHostEncryptionAtHostWarning",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsSettingsSection.avdSessionHostEncryptionAtHost, true)]",
                                    "options": {
                                        "text": "Encryption at host requires feature EncryptionAtHost of resource provider Microsoft.Compute to be registered in the subscription.",
                                        "uri": "https://docs.microsoft.com/en-us/azure/virtual-machines/disks-enable-host-based-encryption-portal?msclkid=31c2d29bbce111ec8bca8257221ab9d1",
                                        "style": "Warning"
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdSessionHostsOsSection",
                            "type": "Microsoft.Common.Section",
                            "visible": "[equals(steps('avdSessionHosts').avdDeploySessionHosts, true)]",
                            "label": "OS selection",
                            "elements": [
                                {
                                    "name": "avdSessionHostsImageSource",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "OS image source",
                                    "filter": true,
                                    "defaultValue": "Marketplace",
                                    "toolTip": "Select marketplace or build custom image to deploy the session hosts.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Marketplace",
                                                "value": false
                                            },
                                            {
                                                "label": "Compute Gallery",
                                                "value": true
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdSessionHostsOsImage",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsOsSection.avdSessionHostsImageSource, false)]",
                                    "label": "OS version",
                                    "filter": true,
                                    "defaultValue": "Windows 11",
                                    "toolTip": "Select OS version to deploy the session hosts with.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Windows 10",
                                                "value": "win10_21h2"
                                            },
                                            {
                                                "label": "Windows 10 - Office 365",
                                                "value": "win10_21h2_office"
                                            },
                                            {
                                                "label": "Windows 11",
                                                "value": "win11_21h2"
                                            },
                                            {
                                                "label": "Windows 11 - Office 365",
                                                "value": "win11_21h2_office"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdSessionHostsComputeGalleryImage",
                                    "type": "Microsoft.Solutions.ResourceSelector",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsOsSection.avdSessionHostsImageSource, true)]",
                                    "label": "Image",
                                    "resourceType": "Microsoft.Compute/galleries/images",
                                    "constraints": {
                                        "required": true
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "avdNetwork",
                    "label": "Network connectivity",
                    "type": "Microsoft.Common.Section",
                    "visible": true,
                    "elements": [
                        {
                            "name": "vnetInfoBox",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "AVD landing zone accelerator requires connectivity to identity services (ADDS or AADDS).",
                                "uri": "https://docs.microsoft.com/azure/virtual-desktop/authentication",
                                "style": "info"
                            }
                        },
                        {
                            "name": "createAvdVnet",
                            "type": "Microsoft.Common.OptionsGroup",
                            "visible": true,
                            "label": "Virtual network",
                            "defaultValue": "New",
                            "toolTip": "",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "New",
                                        "value": true
                                    },
                                    {
                                        "label": "Existing",
                                        "value": false
                                    }
                                ]
                            }
                        },
                        {
                            "name": "avdVnetSize",
                            "type": "Microsoft.Common.TextBox",
                            "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                            "label": "vNet address range",
                            "toolTip": "Virtual network for AVD virtual machines",
                            "placeholder": "Example: 10.10.0.0/23",
                            "constraints": {
                                "required": true,
                                "regex": "^(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\/(1[0-9]|2[0-4]))$",
                                "validationMessage": "Invalid CIDR range. The address prefix must be in the range 10 to 24."
                            }
                        },
                        {
                            "name": "avdVnetSubnetSize",
                            "type": "Microsoft.Common.TextBox",
                            "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                            "label": "Subnet address prefix",
                            "toolTip": "Virtual network subnet for AVD virtual machines",
                            "placeholder": "Example: 10.10.0.0/23",
                            "constraints": {
                                "required": true,
                                "regex": "^(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\/(1[0-9]|2[0-4]))$",
                                "validationMessage": "Invalid CIDR range. The address prefix must be in the range 10 to 24."
                            }
                        },
                        {
                            "name": "avdVnetDns",
                            "type": "Microsoft.Common.TextBox",
                            "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                            "label": "Custom DNS Servers",
                            "defaultValue": "",
                            "placeholder": "Example: 10.10.100.4,10.10.100.5",
                            "toolTip": "Enter multiple IPs separated by a comma, if not provided Azure provided DNS will be used.",
                            "constraints": {
                                "regex": ""
                            }
                        },
                        {
                            "name": "avdVnetPrivateDnsZone",
                            "type": "Microsoft.Common.OptionsGroup",
                            "visible": true,
                            "label": "Azure private DNS zone (Private endpoints)",
                            "defaultValue": "No",
                            "toolTip": "It is recommended to use Azure private DNS zones for private endpoint name spaces (ALZ recommended and deployed).",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": true
                                    },
                                    {
                                        "label": "No",
                                        "value": false
                                    }
                                ]
                            }
                        },
                        {
                            "name": "avdVnetPrivateDnsZoneSelection",
                            "type": "Microsoft.Common.Section",
                            "visible": "[equals(steps('avdNetwork').avdVnetPrivateDnsZone, true)]",
                            "elements": [
                                {
                                    "name": "avdVnetPrivateDnsZoneFilesSelector",
                                    "type": "Microsoft.Solutions.ResourceSelector",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true)]",
                                    "label": "File share (privatelink.file.core.windows.net)",
                                    "resourceType": "Microsoft.Network/privateDnsZones",
                                    "constraints": {
                                        "required": true
                                    }
                                },
                                {
                                    "name": "avdVnetPrivateDnsZoneKeyvaultSelector",
                                    "type": "Microsoft.Solutions.ResourceSelector",
                                    "label": "Key vault (privatelink.vaultcore.azure.net)",
                                    "resourceType": "Microsoft.Network/privateDnsZones",
                                    "constraints": {
                                        "required": true
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdVnetPeeringInfoBox",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                            "options": {
                                "text": "vNet peering will be created to existing vNet hub with access to identity and DNS services .",
                                "uri": "https://docs.microsoft.com/azure/architecture/example-scenario/wvd/windows-virtual-desktop?context=/azure/virtual-desktop/context/context",
                                "style": "info"
                            }
                        },
                        {
                            "name": "avdHubVnetPeering",
                            "type": "Microsoft.Common.Section",
                            "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                            "label": "Existing hub vNet peering information",
                            "elements": [
                                {
                                    "name": "avdHubVnetSubs",
                                    "type": "Microsoft.Solutions.ArmApiControl",
                                    "request": {
                                        "method": "GET",
                                        "path": "subscriptions?api-version=2020-01-01"
                                    }
                                },
                                {
                                    "name": "avdHubVnetSub",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Hub vNet Subscription",
                                    "toolTip": "",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "filter": true,
                                    "filterPlaceholder": "Filter items ...",
                                    "multiLine": true,
                                    "visible": true,
                                    "constraints": {
                                        "allowedValues": "[map(steps('avdNetwork').avdHubVnetPeering.avdHubVnetSubs.value, (sub) => parse(concat('{\"label\":\"', sub.displayName, '\",\"description\":\"', sub.subscriptionId, '\",\"value\":\"', toLower(sub.subscriptionId), '\"}')) )]",
                                        "required": true
                                    }
                                },
                                {
                                    "name": "avdExistingHubVnets",
                                    "type": "Microsoft.Solutions.ArmApiControl",
                                    "request": {
                                        "method": "GET",
                                        "path": "[concat('subscriptions/', steps('avdNetwork').avdHubVnetPeering.avdHubVnetSub, '/providers/Microsoft.Network/virtualNetworks?api-version=2021-08-01')]"
                                    }
                                },
                                {
                                    "name": "avdExistingHubVnet",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Hub vNet",
                                    "toolTip": "",
                                    "multiselect": false,
                                    "selectAll": true,
                                    "filter": true,
                                    "filterPlaceholder": "Filter items ...",
                                    "multiLine": true,
                                    "visible": true,
                                    "constraints": {
                                        "allowedValues": "[map(steps('avdNetwork').avdHubVnetPeering.avdExistingHubVnets.value, (vnet) => parse(concat('{\"label\":\"', vnet.name, '\",\"description\":\"', vnet.location, '\",\"value\":\"', toLower(vnet.id), '\"}')) )]",
                                        "required": true
                                    }
                                },
                                {
                                    "name": "avdHubVnetGateway",
                                    "type": "Microsoft.Common.OptionsGroup",
                                    "visible": true,
                                    "label": "Gateway on hub",
                                    "defaultValue": "No",
                                    "toolTip": "This information will be used to set remote gateway settings on vNet peering.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Yes",
                                                "value": true
                                            },
                                            {
                                                "label": "No",
                                                "value": false
                                            }
                                        ]
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdExistingVnetInfoBox",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": "[equals(steps('avdNetwork').createAvdVnet, false)]",
                            "options": {
                                "text": "Existing network must has connectivity to identity and DNS services.",
                                "uri": "https://docs.microsoft.com/azure/architecture/example-scenario/wvd/windows-virtual-desktop?context=/azure/virtual-desktop/context/context",
                                "style": "info"
                            }
                        },
                        {
                            "name": "avdVnetSelectorId",
                            "type": "Microsoft.Solutions.ResourceSelector",
                            "visible": "[equals(steps('avdNetwork').createAvdVnet, false)]",
                            "label": "Virtual network",
                            "resourceType": "Microsoft.Network/virtualNetworks",
                            "constraints": {
                                "required": true
                            },
                            "options": {
                                "filter": {
                                    "subscription": "onBasics",
                                    "location": "onBasics"
                                }
                            }
                        },
                        {
                            "name": "avdSubnetApi",
                            "type": "Microsoft.Solutions.ArmApiControl",
                            "request": {
                                "method": "GET",
                                "path": "[concat(steps('avdNetwork').avdVnetSelectorId.id, '/subnets?api-version=2021-03-01')]"
                            }
                        },
                        {
                            "name": "avdVnetSubnetSelectorName",
                            "label": "Subnet",
                            "type": "Microsoft.Common.DropDown",
                            "visible": "[equals(steps('avdNetwork').createAvdVnet, false)]",
                            "defaultValue": "",
                            "toolTip": "Select the subnet.",
                            "multiselect": false,
                            "selectAll": false,
                            "filter": true,
                            "filterPlaceholder": "Filter items ...",
                            "multiLine": true,
                            "constraints": {
                                "allowedValues": "[map(steps('avdNetwork').avdSubnetApi.value,(item) => parse(concat('{\"label\":\"', item.name, '\",\"value\":\"', item.id, '\",\"description\":\"', 'Resource Group: ', last(take(split(item.id, '/'), 5)), '\"}')))]",
                                "required": true
                            }
                        },
                        {
                            "name": "avdExistingVnetInfoBoxPrivateEndpointWarning",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": "[equals(steps('avdNetwork').createAvdVnet, false)]",
                            "options": {
                                "text": "Private endpoint network policy needs to be disabled on the existing subnet before deploying AVD accelerator.",
                                "uri": "https://docs.microsoft.com/azure/private-link/disable-private-endpoint-network-policy",
                                "style": "Warning"
                            }
                        }
                    ]
                },
                {
                    "name": "avdResourceNaming",
                    "label": "Resource naming",
                    "type": "Microsoft.Common.Section",
                    "visible": true,
                    "elements": [
                        {
                            "name": "avdResourceNamingInfo1",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "The AVD accelerator provides automated resource naming based on Microsoft best practices, default resources organization and naming is shown in this diagram.",
                                "uri": "https://github.com/Azure/avdaccelerator/blob/main/workload/docs/diagrams/avd-accelerator-resource-organization-naming.png",
                                "style": "Info"
                            }
                        },
                        {
                            "name": "avdResourceNamingSelection",
                            "type": "Microsoft.Common.OptionsGroup",
                            "visible": true,
                            "label": "Custom resource naming",
                            "defaultValue": "No",
                            "toolTip": "When set 'Yes', the information provided will be used to name resources. When set to 'No' deployment will use the AVD accelerator naming standard.",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": true
                                    },
                                    {
                                        "label": "No",
                                        "value": false
                                    }
                                ]
                            }
                        },
                        {
                            "name": "avdResourceNamingWarning",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": "[equals(steps('avdResourceNaming').avdResourceNamingSelection, true)]",
                            "options": {
                                "text": "When using custom naming for resources, please make sure to follow naming rules and restrictions for Azure resources.",
                                "uri": "https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/resource-name-rules",
                                "style": "Warning"
                            }
                        },
                        {
                            "name": "avdResourceNamingAvdManagementPlane",
                            "type": "Microsoft.Common.Section",
                            "label": "AVD Management plane naming:",
                            "visible": "[equals(steps('avdResourceNaming').avdResourceNamingSelection, true)]",
                            "elements": [
                                {
                                    "name": "avdServiceObjectsRgCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Resource group",
                                    "toolTip": "AVD management plane resources (Workspace, Host pool, Application groups, Key vault) resource group custom name.",
                                    "placeholder": "Example: rg-avd-use2-app1-service-objects",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "avdWorkSpaceCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Workspace",
                                    "toolTip": "AVD workspace custom name.",
                                    "placeholder": "Example: vdws-use2-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "avdHostPoolCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Host pool",
                                    "toolTip": "AVD host pool custom name.",
                                    "placeholder": "Example: vdpool-use2-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "avdApplicationGroupCustomNameDesktop",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Application group (Desktop)",
                                    "toolTip": "AVD desktop application group custom name.",
                                    "placeholder": "Example: vdag-desktop-use2-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "avdApplicationGroupCustomNameRapp",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Application group (Remote App)",
                                    "visible": "[equals(steps('avdManagementPlane').avdManagementPlaneAppGroupOptions.avdDeployRappGroup, true)]",
                                    "toolTip": "AVD remote application group custom name.",
                                    "placeholder": "Example: vdag-rapp-use2-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "avdWrklKvCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Key vault prefix",
                                    "toolTip": "AVD keyvault prefix custom name.",
                                    "placeholder": "Example: kv-avd",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,6}$",
                                        "validationMessage": "Value must be 1-6 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdResourceNamingCompute",
                            "type": "Microsoft.Common.Section",
                            "label": "Compute naming:",
                            "visible": "[equals(steps('avdResourceNaming').avdResourceNamingSelection, true)]",
                            "elements": [
                                {
                                    "name": "avdComputeObjectsRgCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Resource group",
                                    "toolTip": "AVD compute resources (VMs, NICs, Disks, Availability sets) resource group custom name.",
                                    "placeholder": "Example: rg-avd-use2-app1-pool-compute",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "avdApplicationSecurityGroupCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Applications security group",
                                    "toolTip": "AVD application security custom name.",
                                    "placeholder": "Example: asg-avd-use2-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                },
                                {
                                    "name": "avdSessionHostCustomNamePrefix",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Session host prefix",
                                    "visible": "[equals(steps('avdSessionHosts').avdDeploySessionHosts, true)]",
                                    "toolTip": "AVD session host prefix custom name.",
                                    "placeholder": "Example: vm-avd-app1",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,11}$",
                                        "validationMessage": "Value must be 1-11 characters."
                                    }
                                },
                                {
                                    "name": "avdAvailabilitySetCustomNamePrefix",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Availability set prefix",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdSessionHostsAvailabilitySettings, false)]",
                                    "toolTip": "AVD availability set custom name.",
                                    "placeholder": "Example: avail-avd",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,9}$",
                                        "validationMessage": "Value must be 1-9 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdResourceNamingStorage",
                            "type": "Microsoft.Common.Section",
                            "label": "FSLogix storage naming:",
                            "visible": "[equals(steps('avdResourceNaming').avdResourceNamingSelection, true)]",
                            "elements": [
                                {
                                    "name": "avdResourceNamingStorageInfo1",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, false)]",
                                    "options": {
                                        "text": "Current deployment configuration is not creating storage (FSLogix) resources.",
                                        "style": "Info"
                                    }
                                },
                                {
                                    "name": "avdResourceNamingStorageInfo2",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[equals(steps('avdSessionHosts').avdDeploySessionHosts, false)]",
                                    "options": {
                                        "text": "Current deployment configuration is not creating storage (FSLogix) resources.",
                                        "style": "Info"
                                    }
                                },
                                {
                                    "name": "avdStorageObjectsRgCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Resource group",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true)]",
                                    "toolTip": "AVD storage resources (Storage account, file shares, files private endpoints, temporary domain join VM) resource group custom name.",
                                    "placeholder": "Example: rg-avd-use2-app1-storage",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "avdFslogixStorageCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Storage account prefix",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true)]",
                                    "toolTip": "AVD fslogix storage account prefix custom name.",
                                    "placeholder": "Example: stavd",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,5}$",
                                        "validationMessage": "Value must be 1-5 characters."
                                    }
                                },
                                {
                                    "name": "avdFslogixProfileContainerFileShareCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Profile container file share",
                                    "visible": "[equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true)]",
                                    "toolTip": "AVD fslogix storage account profile container file share prefix custom name.",
                                    "placeholder": "Example: fslogix-pc-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdResourceNamingNetwork",
                            "type": "Microsoft.Common.Section",
                            "label": "Network naming:",
                            "visible": "[equals(steps('avdResourceNaming').avdResourceNamingSelection, true)]",
                            "elements": [
                                {
                                    "name": "avdResourceNamingNetworkInfo",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[equals(steps('avdNetwork').createAvdVnet, false)]",
                                    "options": {
                                        "text": "Current deployment configuration is not creating network resources.",
                                        "style": "Info"
                                    }
                                },
                                {
                                    "name": "avdNetworkObjectsRgCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Resource group",
                                    "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                                    "toolTip": "AVD network resources (vNet, NSG, Route table) resource group custom name.",
                                    "placeholder": "Example: rg-avd-use2-app1-network",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "avdVnetworkCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Virtual network",
                                    "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                                    "toolTip": "AVD virtual network custom name.",
                                    "placeholder": "Example: vnet-avd-use2-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "avdVnetworkSubnetCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Subnet",
                                    "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                                    "toolTip": "AVD virtual network subnet custom name.",
                                    "placeholder": "Example: snet-avd-use2-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                },
                                {
                                    "name": "avdNetworksecurityGroupCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Network security group",
                                    "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                                    "toolTip": "AVD network security group custom name.",
                                    "placeholder": "Example: nsg-avd-use2-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                },
                                {
                                    "name": "avdRouteTableCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Route table",
                                    "visible": "[equals(steps('avdNetwork').createAvdVnet, true)]",
                                    "toolTip": "AVD route table custom name.",
                                    "placeholder": "Example: route-avd-use2-app1-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "avdResourceNamingInfo2",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "AVD accelerator has built-in resource naming automation based and best practices Microsoft Cloud Adoption Framework (CAF) naming convention.",
                                "uri": "https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/resource-naming",
                                "style": "Info"
                            }
                        },
                        {
                            "name": "avdResourceNamingInfo3",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "And abbreviations recommendations for Azure resource types.",
                                "uri": "https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/resource-abbreviations",
                                "style": "Info"
                            }
                        }
                    ]
                },
                {
                    "name": "avdResourceTagging",
                    "label": "Resource tagging",
                    "type": "Microsoft.Common.Section",
                    "visible": true,
                    "elements": [
                        {
                            "name": "avdResourceTaggingSelection",
                            "type": "Microsoft.Common.OptionsGroup",
                            "visible": true,
                            "label": "Create resource tags",
                            "defaultValue": "No",
                            "toolTip": "When set 'Yes', the information provided will be used to create tags on resources and resource groups.",
                            "constraints": {
                                "required": true,
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": true
                                    },
                                    {
                                        "label": "No",
                                        "value": false
                                    }
                                ]
                            }
                        },
                        {
                            "name": "avdResourceTags",
                            "type": "Microsoft.Common.Section",
                            "label": "Resources tags:",
                            "visible": "[equals(steps('avdResourceTagging').avdResourceTaggingSelection, true)]",
                            "elements": [
                                {
                                    "name": "avdTagsWorkloadName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Workload name:",
                                    "toolTip": "This input will be the value of a tag named WorkloadName.",
                                    "placeholder": "Example: Contoso-Workload",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "avdTagsWorkloadType",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Workload type:",
                                    "filter": true,
                                    "defaultValue": "Light",
                                    "toolTip": "This input will be the value of a tag named WorkloadType, reference to the size of the VM for your workloads.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Light",
                                                "description": "",
                                                "value": "Light"
                                            },
                                            {
                                                "label": "Medium",
                                                "description": "",
                                                "value": "Medium"
                                            },
                                            {
                                                "label": "High",
                                                "description": "",
                                                "value": "High"
                                            },
                                            {
                                                "label": "Power",
                                                "description": "",
                                                "value": "POwer"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdTagsDataClassificationTag",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Data classification:",
                                    "filter": true,
                                    "defaultValue": "Non-business",
                                    "toolTip": "This input will be the value of a tag named DataClassification, reference to the sensitivity of data hosted.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Non-business",
                                                "description": "",
                                                "value": "Non-business"
                                            },
                                            {
                                                "label": "Public",
                                                "description": "",
                                                "value": "Public"
                                            },
                                            {
                                                "label": "General",
                                                "description": "",
                                                "value": "General"
                                            },
                                            {
                                                "label": "Confidential",
                                                "description": "",
                                                "value": "Confidential"
                                            },
                                            {
                                                "label": "Highly-confidential",
                                                "description": "",
                                                "value": "Highly-confidential"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdTagsDepartmentTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Department:",
                                    "toolTip": "This input will be the value of a tag named Department, reference the department that owns the deployment.",
                                    "placeholder": "Example: Contoso-AVD",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "avdTagsCriticalityTag",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Workload criticality:",
                                    "filter": true,
                                    "defaultValue": "Low",
                                    "toolTip": "This input will be the value of a tag named Criticality, reference to the criticality of the workload.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Low",
                                                "description": "",
                                                "value": "Low"
                                            },
                                            {
                                                "label": "Medium",
                                                "description": "",
                                                "value": "Medium"
                                            },
                                            {
                                                "label": "High",
                                                "description": "",
                                                "value": "High"
                                            },
                                            {
                                                "label": "Missin-critical",
                                                "description": "",
                                                "value": "Missin-critical"
                                            },
                                            {
                                                "label": "Custom",
                                                "description": "",
                                                "value": "Custom"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "avdTagsCustomWorkloadCriticality",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Custom workload criticality:",
                                    "visible": "[equals(steps('avdResourceTagging').avdResourceTags.avdTagsCriticalityTag, 'Custom')]",
                                    "toolTip": "This input will be the value of a tag named Criticality, reference to a custom criticality for the workload.",
                                    "placeholder": "Example: Contoso-Criticality",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "avdTagsApplicationNameTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Application name:",
                                    "toolTip": "This input will be the value of a tag named ApplicationName, reference details about the application.",
                                    "placeholder": "Example: Contoso-App",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "avdTagsWorkloadSlaTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Workload SLA:",
                                    "toolTip": "This input will be the value of a tag named ServiceClass, reference to the service level agreement level of the worload.",
                                    "placeholder": "Example: Contoso-SLA",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "avdTagsOpsTeamTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Operations team:",
                                    "toolTip": "This input will be the value of a tag named OpsTeam, reference to the team accountable for day-to-day operations.",
                                    "placeholder": "Example: workload-admins@Contoso.com",
                                    "constraints": {
                                        "required": true
                                    }
                                },
                                {
                                    "name": "avdTagsOwnerTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Owner:",
                                    "toolTip": "This input will be the value of a tag named Owner, reference to the organizational owner of the AVD deployment.",
                                    "placeholder": "Example: workload-owner@Contoso.com",
                                    "constraints": {
                                        "required": true
                                    }
                                },
                                {
                                    "name": "avdTagsCostCenterTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Cost center:",
                                    "toolTip": "This input will be the value of a tag named CostCenter, reference to the cost center of owner team.",
                                    "placeholder": "Example: Contoso-CC",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "avdTagsEnvironmentTypeTag",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Environment type:",
                                    "filter": true,
                                    "defaultValue": "Dev",
                                    "toolTip": "This input will be the value of a tag named Environment, reference to the environment type of the workload.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Dev",
                                                "description": "",
                                                "value": "Dev"
                                            },
                                            {
                                                "label": "Staging",
                                                "description": "",
                                                "value": "Staging"
                                            },
                                            {
                                                "label": "Prod",
                                                "description": "",
                                                "value": "Prod"
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        "outputs": {
            "parameters": {
                "deploymentPrefix": "[steps('basics').avdDeploymentPrefix]",
                "avdSessionHostLocation": "[steps('basics').avdDeploymentScope.location.name]",
                "avdManagementPlaneLocation": "[steps('avdManagementPlane').avdManagementPlanelocation.avdManagementPlaneLocation]",
                "avdWorkloadSubsId": "[steps('basics').avdDeploymentScope.subscription.subscriptionId]",
                "avdHostPoolType": "[steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.hostPoolType]",
                "avdHostPoolLoadBalancerType": "[steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.loadBalancerType]",
                "avhHostPoolMaxSessions": "[if(equals(steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.hostPoolType, 'Pooled'), steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.maxSessions, 1)]",
                "avdPersonalAssignType": "[if(equals(steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.hostPoolType, 'Personal'), steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.assignmentType, 'Automatic')]",
                "avdDeployRappGroup": "[if(equals(steps('avdManagementPlane').avdManagementPlaneHostPoolSettings.hostPoolType, 'Pooled'), steps('avdManagementPlane').avdManagementPlaneAppGroupOptions.avdDeployRappGroup, 'none')]",
                "avdIdentityServiceProvider": "[steps('avdIdentity').avdIdentityDomainInformation.avdIdentityServiceProvider]",
                "avdIdentityDomainName": "[steps('avdIdentity').avdIdentityDomainInformation.avdIdentityDomainName]",
                "avdOuPath": "[steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdIdentityDomainOuPath]",
                "avdDomainJoinUserName": "[steps('avdIdentity').avdIdentityDomainCredentials.avdIdentityDomainJoinUserName]",
                "avdDomainJoinUserPassword": "[steps('avdIdentity').avdIdentityDomainCredentials.avdIdentityDomainJoinUserPassword]",
                "avdVmLocalUserName": "[steps('avdIdentity').avdIdentityLocalCredentials.avdIdentityLocalUserName]",
                "avdVmLocalUserPassword": "[steps('avdIdentity').avdIdentityLocalCredentials.avdIdentityLocalUserPassword.password]",
                "createAvdVnet": "[steps('avdNetwork').createAvdVnet]",
                "avdVnetworkAddressPrefixes": "[if(equals(steps('avdNetwork').createAvdVnet, true), steps('avdNetwork').avdVnetSize, '10.10.0.0/23')]",
                "avdVnetworkSubnetAddressPrefix": "[if(equals(steps('avdNetwork').createAvdVnet, true), steps('avdNetwork').avdVnetSubnetSize, '10.10.0.0/23')]",
                "customDnsIps": "[if(equals(steps('avdNetwork').createAvdVnet, true), steps('avdNetwork').avdVnetDns, 'none')]",
                "existingHubVnetResourceId": "[if(equals(steps('avdNetwork').createAvdVnet, true), steps('avdNetwork').avdHubVnetPeering.avdExistingHubVnet, 'none')]",
                "vNetworkGatewayOnHub": "[if(equals(steps('avdNetwork').createAvdVnet, true), steps('avdNetwork').avdHubVnetPeering.avdHubVnetGateway, false)]",
                "existingVnetSubnetResourceId": "[if(equals(steps('avdNetwork').createAvdVnet, false), steps('avdNetwork').avdVnetSubnetSelectorName, 'none')]",
                "avdDeploySessionHosts": "[steps('avdSessionHosts').avdDeploySessionHosts]",
                "avdStartVmOnConnect": "[steps('avdManagementPlane').avdManagementPlaneHostPoolScaling.startVmOnConnect]",
                "createStartVmOnConnectCustomRole": "[if(equals(steps('avdManagementPlane').avdManagementPlaneHostPoolScaling.startVmOnConnect, true), steps('avdManagementPlane').avdManagementPlaneHostPoolScaling.createVmRole, false)]",
                "avdEnterpriseAppObjectId": "[if(equals(steps('avdManagementPlane').avdManagementPlaneHostPoolScaling.createVmRole, true), steps('avdManagementPlane').avdManagementPlaneHostPoolScaling.avdEnterApplication.objectId, 'none')]",
                "avdUseAvailabilityZones": "[steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdSessionHostsAvailabilitySettings]",
                "avdDeploySessionHostsCount": "[if(equals(steps('avdSessionHosts').avdDeploySessionHosts, true), steps('avdSessionHosts').avdSessionHostsSettingsSection.avdSessionHostsCount, 1)]",
                "useSharedImage": "[if(equals(steps('avdSessionHosts').avdDeploySessionHosts, true), steps('avdSessionHosts').avdSessionHostsOsSection.avdSessionHostsImageSource, false)]",
                "avdOsImage": "[if(equals(steps('avdSessionHosts').avdSessionHostsOsSection.avdSessionHostsImageSource, false), steps('avdSessionHosts').avdSessionHostsOsSection.avdSessionHostsOsImage, 'win11_21h2')]",
                "avdImageTemplataDefinitionId": "[if(equals(steps('avdSessionHosts').avdSessionHostsOsSection.avdSessionHostsImageSource, true), steps('avdSessionHosts').avdSessionHostsOsSection.avdSessionHostsComputeGalleryImage.id, 'none')]",
                "avdSessionHostDiskType": "[steps('avdSessionHosts').avdSessionHostsSettingsSection.avdSessionHostDiskType]",
                "encryptionAtHost": "[steps('avdSessionHosts').avdSessionHostsSettingsSection.avdSessionHostEncryptionAtHost]",
                "avdSessionHostsSize": "[if(equals(steps('avdSessionHosts').avdDeploySessionHosts, true), steps('avdSessionHosts').avdSessionHostsSettingsSection.element1, 'Standard_D2s_v4')]",
                "createOuForStorage": "[if(equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true), steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdIdentityDomainOuPathBool, '')]",
                "avdVnetPrivateDnsZone": "[steps('avdNetwork').avdVnetPrivateDnsZone]",
                "avdVnetPrivateDnsZoneFilesId": "[if(equals(steps('avdNetwork').avdVnetPrivateDnsZone, true), steps('avdNetwork').avdVnetPrivateDnsZoneSelection.avdVnetPrivateDnsZoneFilesSelector.id, '')]",
                "avdVnetPrivateDnsZoneKeyvaultId": "[if(equals(steps('avdNetwork').avdVnetPrivateDnsZone, true), steps('avdNetwork').avdVnetPrivateDnsZoneSelection.avdVnetPrivateDnsZoneKeyvaultSelector.id, '')]",
                "createAvdFslogixDeployment": "[steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment]",
                "fslogixStorageSku": "[if(equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true), steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdStorageAccountSku, 'Standard_LRS')]",
                "avdFslogixFileShareQuotaSize": "[if(equals(steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdFslogixDeployment, true), steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdSessionHostsFslogixFileShareQuota, 1 )]",
                "storageOuPath": "[steps('avdSessionHosts').avdSessionHostsComputeStorageSection.avdIdentityDomainOuPathStorage]",
                "avdUseCustomNaming": "[steps('avdResourceNaming').avdResourceNamingSelection]",
                "avdServiceObjectsRgCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingAvdManagementPlane.avdServiceObjectsRgCustomName, 'none')]",
                "avdNetworkObjectsRgCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingNetwork.avdNetworkObjectsRgCustomName, 'none')]",
                "avdComputeObjectsRgCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingCompute.avdComputeObjectsRgCustomName, 'none')]",
                "avdStorageObjectsRgCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingStorage.avdStorageObjectsRgCustomName, 'none')]",
                "avdVnetworkCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingNetwork.avdVnetworkCustomName, 'none')]",
                "avdVnetworkSubnetCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingNetwork.avdVnetworkSubnetCustomName, 'none')]",
                "avdNetworksecurityGroupCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingNetwork.avdNetworksecurityGroupCustomName, 'none')]",
                "avdRouteTableCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingNetwork.avdRouteTableCustomName, 'none')]",
                "avdApplicationSecurityGroupCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingCompute.avdApplicationSecurityGroupCustomName, 'none')]",
                "avdWorkSpaceCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingAvdManagementPlane.avdWorkSpaceCustomName, 'none')]",
                "avdHostPoolCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingAvdManagementPlane.avdHostPoolCustomName, 'none')]",
                "avdApplicationGroupCustomNameDesktop": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingAvdManagementPlane.avdApplicationGroupCustomNameDesktop, 'none')]",
                "avdApplicationGroupCustomNameRapp": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingAvdManagementPlane.avdApplicationGroupCustomNameRapp, 'none')]",
                "avdSessionHostCustomNamePrefix": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingCompute.avdSessionHostCustomNamePrefix, 'none')]",
                "avdAvailabilitySetCustomNamePrefix": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingCompute.avdAvailabilitySetCustomNamePrefix, 'none')]",
                "avdFslogixStoragePrefixCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingStorage.avdFslogixStorageCustomName, 'none')]",
                "avdFslogixProfileContainerFileShareCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingStorage.avdFslogixProfileContainerFileShareCustomName, 'none')]",
                "avdWrklKvPrefixCustomName": "[if(equals(steps('avdResourceNaming').avdResourceNamingSelection, true), steps('avdResourceNaming').avdResourceNamingAvdManagementPlane.avdWrklKvCustomName, 'none')]",
                "createResourceTags": "[steps('avdResourceTagging').avdResourceTaggingSelection]",
                "workloadNameTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsWorkloadName, 'none')]",
                "workloadTypeTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsWorkloadType, 'Light')]",
                "dataClassificationTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsDataClassificationTag, 'Non-business')]",
                "departmentTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsDepartmentTag, 'none')]",
                "workloadCriticalityTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsCriticalityTag, 'Low')]",
                "workloadCriticalityCustomValueTag": "[if(equals(steps('avdResourceTagging').avdResourceTags.avdTagsCriticalityTag, 'Custom'), steps('avdResourceTagging').avdResourceTags.avdTagsCustomWorkloadCriticality, 'Low')]",
                "applicationNameTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsApplicationNameTag, 'none')]",
                "workloadSlaTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsWorkloadSlaTag, 'none')]",
                "opsTeamTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsOpsTeamTag, 'none')]",
                "ownerTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsOwnerTag, 'none')]",
                "costCenterTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsCostCenterTag, 'none')]",
                "environmentTypeTag": "[if(equals(steps('avdResourceTagging').avdResourceTaggingSelection, true), steps('avdResourceTagging').avdResourceTags.avdTagsEnvironmentTypeTag, 'Dev')]"
            },
            "kind": "Subscription",
            "location": "[steps('basics').avdDeploymentScope.location.name]",
            "subscriptionId": "[steps('basics').avdDeploymentScope.subscription.id]"
        }
    }
}
