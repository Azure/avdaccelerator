{
    "$schema": "<relative path to createFormUI.schema.json>",
    "view": {
        "kind": "Form",
        "properties": {
            "isWizard": false,
            "title": "Windows 365 - Landing Zone Accelerator (LZA) - Baseline",
            "steps": [
                {
                    "name": "basics",
                    "label": "Deployment Basics",
                    "elements": [
                        {
                            "name": "subscriptionsApi",
                            "type": "Microsoft.Solutions.ArmApiControl",
                            "request": {
                                "method": "GET",
                                "path": "subscriptions?api-version=2022-01-01"
                            }
                        },
                        {
                            "name": "infoPreReqCheckbox",
                            "type": "Microsoft.Common.CheckBox",
                            "visible": true,
                            "label": "I have read and understand the Azure Virtual Desktop LZA deployment pre-requisites",
                            "defaultValue": false,
                            "toolTip": "I have read and understand the Azure Virtual Desktop LZA deployment pre-requisites.",
                            "constraints": {
                                "required": true
                            }
                        },
                        {
                            "name": "deploymentInfo",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "style": "Info",
                                "text": "The subscription selected in the 'Project details' section below will be used to deploy Windows 365 networking resources",
                                "uri": "https://learn.microsoft.com/windows-365/enterprise/requirements-network?tabs=enterprise%2Cent"
                            }
                        },
                        {
                            "name": "resourceScope",
                            "type": "Microsoft.Common.ResourceScope",
                            "location": {
                                "resourceTypes": [
                                    "Microsoft.DesktopVirtualization/workspaces"
                                ]
                            }
                        },
                        {
                            "name": "infoResourceGroupNaming",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "Azure Virtual Desktop Landing Zones will create the resource group hierarchy under the subscriptions with the prefix provided in this step.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://docs.microsoft.com/azure/cloud-adoption-framework/ready/enterprise-scale/management-group-and-subscription-organization"
                                }
                            }
                        },
                        {
                            "name": "deploymentSpecs",
                            "type": "Microsoft.Common.Section",
                            "visible": true,
                            "label": "Deployment Specs",
                            "elements": [
                                {
                                    "name": "deploymentPrefix",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Prefix",
                                    "toolTip": "Provide a prefix (max 4 characters) for the resource groups and resources created as part of Azure Virtual Desktop landing zones.",
                                    "placeholder": "Example: app1",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,4}$",
                                        "validationMessage": "The prefix must be 1-4 characters."
                                    }
                                },
                                {
                                    "name": "deploymentEnvironment",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": true,
                                    "label": "Environment",
                                    "defaultValue": "Development",
                                    "toolTip": "Select the type of environment (Development (d), Test (t), Production (p)) that will be deployed, this information will be use as part of the resources naming.",
                                    "constraints": {
                                        "allowedValues": [
                                            {
                                                "label": "Development",
                                                "value": "Dev"
                                            },
                                            {
                                                "label": "Test",
                                                "value": "Test"
                                            },
                                            {
                                                "label": "Production",
                                                "value": "Prod"
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "network",
                    "label": "Networking",
                    "type": "Microsoft.Common.Section",
                    "visible": true,
                    "elements": [
                        {
                            "name": "virtualNetworkSize",
                            "type": "Microsoft.Common.TextBox",
                            "visible": "[steps('network').createAvdVirtualNetwork]",
                            "label": "vNet address range",
                            "toolTip": "Virtual network CIDR for Azure Virtual Desktop virtual machines and PaaS private endpoints",
                            "placeholder": "Example: 10.10.0.0/23",
                            "constraints": {
                                "required": true,
                                "regex": "^(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\/(1[0-9]|2[0-4]))$",
                                "validationMessage": "Invalid CIDR range. The address prefix must be in the range 10 to 24."
                            }
                        },
                        {
                            "name": "virtualNetworkAvdSubnetSize",
                            "type": "Microsoft.Common.TextBox",
                            "visible": "[steps('network').createAvdVirtualNetwork]",
                            "label": "Windows 365 subnet address prefix",
                            "toolTip": "Virtual network subnet CIDR for Azure Virtual Desktop virtual machines",
                            "placeholder": "Example: 10.10.0.0/24",
                            "constraints": {
                                "required": true,
                                "regex": "^(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\/(1[0-9]|2[0-4]))$",
                                "validationMessage": "Invalid CIDR range. The address prefix must be in the range 10 to 24."
                            }
                        },
                        {
                            "name": "virtualNetworkDns",
                            "type": "Microsoft.Common.TextBox",
                            "visible": "[and(steps('network').createAvdVirtualNetwork, not(equals(steps('identity').identityDomainInformation.identityServiceProvider, 'EntraID')))]",
                            "label": "Custom DNS servers",
                            "defaultValue": "",
                            "placeholder": "Example: 10.10.100.4,10.10.100.5",
                            "toolTip": "Enter multiple IPs separated by a comma, if not provided Azure provided DNS will be used. Azure default DNS server (168.63.129.16) will be added as a last resort.",
                            "constraints": {
                                "regex": ""
                            }
                        },
                        {
                            "name": "deployDDoSNetworkProtection",
                            "type": "Microsoft.Common.CheckBox",
                            "visible": "[steps('network').createAvdVirtualNetwork]",
                            "label": "Enable DDoS Network Protection",
                            "defaultValue": false,
                            "toolTip": "Enables DDoS Network Protection for the virtual network."
                        },
                        {
                            "name": "hubVirtualNetworkPeering",
                            "type": "Microsoft.Common.Section",
                            "visible": "[steps('network').createAvdVirtualNetwork]",
                            "label": "Existing hub vNet peering information",
                            "elements": [
                                {
                                    "name": "virtualNetworkPeeringInfoBox1",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[and(equals(steps('network').createAvdVirtualNetwork, true),not(equals(steps('identity').identityDomainInformation.identityServiceProvider, 'EntraID')))]",
                                    "options": {
                                        "text": "vNet peering will be created to existing vNet hub with access to identity and DNS services .",
                                        "uri": "https://docs.microsoft.com/azure/architecture/example-scenario/wvd/windows-virtual-desktop?context=/azure/virtual-desktop/context/context",
                                        "style": "info"
                                    }
                                },
                                {
                                    "name": "hubVirtualNetworkPeeringInfoBox2",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[equals(steps('identity').identityDomainInformation.identityServiceProvider, 'EntraID')]",
                                    "options": {
                                        "text": "vNet peering to identity services is not required when Microsoft Entra ID as identity service provider .",
                                        "uri": "https://learn.microsoft.com/azure/architecture/example-scenario/wvd/azure-virtual-desktop-azure-active-directory-join",
                                        "style": "info"
                                    }
                                },
                                {
                                    "name": "hubVirtualNetworkSub",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": "[not(equals(steps('identity').identityDomainInformation.identityServiceProvider, 'EntraID'))]",
                                    "label": "Hub vNet Subscription",
                                    "toolTip": "",
                                    "multiselect": false,
                                    "selectAll": false,
                                    "filter": true,
                                    "filterPlaceholder": "Filter items ...",
                                    "multiLine": true,
                                    "constraints": {
                                        "allowedValues": "[map(steps('basics').subscriptionsApi.value, (sub) => parse(concat('{\"label\":\"', sub.displayName, '\",\"description\":\"', sub.subscriptionId, '\",\"value\":\"', toLower(sub.subscriptionId), '\"}')) )]",
                                        "required": true
                                    }
                                },
                                {
                                    "name": "existingHubVirtualNetworks",
                                    "type": "Microsoft.Solutions.ArmApiControl",
                                    "request": {
                                        "method": "GET",
                                        "path": "[concat('subscriptions/', steps('network').hubVirtualNetworkPeering.hubVirtualNetworkSub, '/providers/Microsoft.Network/virtualNetworks?api-version=2022-01-01')]"
                                    }
                                },
                                {
                                    "name": "existingHubVirtualNetwork",
                                    "type": "Microsoft.Common.DropDown",
                                    "visible": "[not(equals(steps('identity').identityDomainInformation.identityServiceProvider, 'EntraID'))]",
                                    "label": "Hub vNet",
                                    "toolTip": "",
                                    "multiselect": false,
                                    "selectAll": true,
                                    "filter": true,
                                    "filterPlaceholder": "Filter items ...",
                                    "multiLine": true,
                                    "constraints": {
                                        "allowedValues": "[map(steps('network').hubVirtualNetworkPeering.existingHubVirtualNetworks.value, (vnet) => parse(concat('{\"label\":\"', vnet.name, '\",\"description\":\"', vnet.location, '\",\"value\":\"', toLower(vnet.id), '\"}')) )]",
                                        "required": true
                                    }
                                },
                                {
                                    "name": "hubVirtualNetworkGateway",
                                    "type": "Microsoft.Common.CheckBox",
                                    "visible": "[not(equals(steps('identity').identityDomainInformation.identityServiceProvider, 'EntraID'))]",
                                    "label": "Gateway on hub",
                                    "defaultValue": false,
                                    "toolTip": "This information will be used to set remote gateway settings on vNet peering."
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "resourceNaming",
                    "label": "Resource naming",
                    "type": "Microsoft.Common.Section",
                    "visible": true,
                    "elements": [
                        {
                            "name": "resourceNamingInfo1",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "Azure Virtual Desktop LZA default naming scheme is shown in this diagram.",
                                "uri": "https://github.com/Azure/avdaccelerator/blob/main/workload/docs/diagrams/avd-accelerator-resource-organization-naming.png",
                                "style": "Info"
                            }
                        },
                        {
                            "name": "resourceNamingSelection",
                            "type": "Microsoft.Common.CheckBox",
                            "visible": true,
                            "label": "Custom resource naming",
                            "defaultValue": false,
                            "toolTip": "When selected, the information provided will be used to name resources. When set to 'No' deployment will use the Azure Virtual Desktop LZA naming standard."
                        },
                        {
                            "name": "resourceNamingWarning",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": "[steps('resourceNaming').resourceNamingSelection]",
                            "options": {
                                "text": "When using custom naming for resources, please make sure to follow naming rules and restrictions for Azure resources.",
                                "uri": "https://docs.microsoft.com/azure/azure-resource-manager/management/resource-name-rules",
                                "style": "Warning"
                            }
                        },
                        {
                            "name": "resourceNamingAvdManagementPlane",
                            "type": "Microsoft.Common.Section",
                            "label": "Azure Virtual Desktop Management plane naming:",
                            "visible": "[steps('resourceNaming').resourceNamingSelection]",
                            "elements": [
                                {
                                    "name": "serviceObjectsRgCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Resource group",
                                    "toolTip": "Azure Virtual Desktop management plane resources (Workspace, Host pool, Application groups, Key vault) resource group custom name.",
                                    "placeholder": "Example: rg-avd-app1-dev-use2-service-objects",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "workSpaceCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Workspace",
                                    "toolTip": "Workspace custom name.",
                                    "placeholder": "Example: vdws-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "workSpaceCustomFriendlyName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Workspace (Friendly name)",
                                    "toolTip": "Workspace custom friendly name.",
                                    "placeholder": "Example: App1 - Dev - East US 2 - 001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "hostPoolCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Host pool",
                                    "toolTip": "Host pool custom name.",
                                    "placeholder": "Example: vdpool-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "hostPoolCustomFriendlyName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Host pool (Friendly name)",
                                    "toolTip": "Host pool custom friendly name.",
                                    "placeholder": "Example: App1 - Dev - East US 2 - 001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "scalingPlanCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Scaling Plan",
                                    "toolTip": "Host pool scaling plan.",
                                    "placeholder": "Example: vdscaling-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "applicationGroupCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Application group",
                                    "toolTip": "Application group custom name.",
                                    "placeholder": "Example: vdag-desktop-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "applicationGroupCustomFriendlyName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Application group (Friendly name)",
                                    "toolTip": "Desktop application group custom name.",
                                    "placeholder": "Example: Desktops - App1 - Dev - East US 2 - 001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "workloadKvCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Key vault prefix",
                                    "toolTip": "Key vault prefix custom name.",
                                    "placeholder": "Example: kv-sec",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,6}$",
                                        "validationMessage": "Value must be 1-6 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "resourceNamingCompute",
                            "type": "Microsoft.Common.Section",
                            "label": "Compute naming:",
                            "visible": "[steps('resourceNaming').resourceNamingSelection]",
                            "elements": [
                                {
                                    "name": "computeObjectsRgCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Resource group",
                                    "toolTip": "Azure Virtual Desktop compute resources (VMs, NICs, Disks, VMSS) resource group custom name.",
                                    "placeholder": "Example: rg-avd-app1-dev-use2-pool-compute",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "applicationSecurityGroupCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Applications security group",
                                    "toolTip": "Azure Virtual Desktop application security custom name.",
                                    "placeholder": "Example: asg-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                },
                                {
                                    "name": "sessionHostCustomNamePrefix",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Session host prefix",
                                    "visible": "[steps('sessionHosts').deploySessionHosts]",
                                    "toolTip": "Azure Virtual Desktop session host prefix custom name.",
                                    "placeholder": "Example: vmapp1deus2",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,11}$",
                                        "validationMessage": "Value must be 1-11 characters."
                                    }
                                },
                                {
                                    "name": "vmssCustomNamePrefix",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "VMSS Flex prefix",
                                    "visible": "[not(steps('sessionHosts').sessionHostsRegionSection.sessionHostsAvailabilitySettings)]",
                                    "toolTip": "Azure Virtual Desktop VMSS Flex custom name.",
                                    "placeholder": "Example: avail",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,9}$",
                                        "validationMessage": "Value must be 1-9 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "resourceNamingStorage",
                            "type": "Microsoft.Common.Section",
                            "label": "Storage naming:",
                            "visible": "[steps('resourceNaming').resourceNamingSelection]",
                            "elements": [
                                {
                                    "name": "resourceNamingStorageInfo1",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[not(steps('storage').storageFslogix.fslogixDeployment)]",
                                    "options": {
                                        "text": "Current deployment configuration is not creating storage resources for FSLogix.",
                                        "style": "Info"
                                    }
                                },
                                {
                                    "name": "resourceNamingStorageInfo2",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[not(steps('storage').storageMsix.msixDeployment)]",
                                    "options": {
                                        "text": "Current deployment configuration is not creating storage resources for MSIX App Attach.",
                                        "style": "Info"
                                    }
                                },
                                {
                                    "name": "resourceNamingStorageInfo3",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[not(steps('sessionHosts').deploySessionHosts)]",
                                    "options": {
                                        "text": "Current deployment configuration is not creating storage resources.",
                                        "style": "Info"
                                    }
                                },
                                {
                                    "name": "storageObjectsRgCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Resource group",
                                    "visible": "[or(equals(steps('storage').storageFslogix.fslogixDeployment, true), equals(steps('storage').storageMsix.msixDeployment, true))]",
                                    "toolTip": "Azure Virtual Desktop storage resources (Storage account, file shares, files private endpoints, temporary domain join VM) resource group custom name.",
                                    "placeholder": "Example: rg-avd-app1-dev-use2-storage",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "storageAccountPrefixCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Storage account prefix",
                                    "visible": "[or(equals(steps('storage').storageFslogix.fslogixDeployment, true), equals(steps('storage').storageMsix.msixDeployment, true))]",
                                    "toolTip": "Azure Virtual Desktop storage account prefix custom name.",
                                    "placeholder": "Example: st",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,2}$",
                                        "validationMessage": "Value must be 1-2 characters."
                                    }
                                },
                                {
                                    "name": "fslogixFileShareCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "FSLogix Profile container file share",
                                    "visible": "[steps('storage').storageFslogix.fslogixDeployment]",
                                    "toolTip": "Azure Virtual Desktop fslogix storage account profile container file share prefix custom name.",
                                    "placeholder": "Example: fslogix-pc-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "msixFileShareCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "MSIX App Attach container file share",
                                    "visible": "[steps('storage').storageMsix.msixDeployment]",
                                    "toolTip": "Azure Virtual Desktop MSIX App Attach storage account container file share prefix custom name.",
                                    "placeholder": "Example: msix-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "resourceNamingNetwork",
                            "type": "Microsoft.Common.Section",
                            "label": "Network naming:",
                            "visible": "[steps('resourceNaming').resourceNamingSelection]",
                            "elements": [
                                {
                                    "name": "resourceNamingNetworkInfo",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[not(steps('network').createAvdVirtualNetwork)]",
                                    "options": {
                                        "text": "Current deployment configuration is not creating network resources.",
                                        "style": "Info"
                                    }
                                },
                                {
                                    "name": "networkObjectsRgCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Resource group",
                                    "visible": "[steps('network').createAvdVirtualNetwork]",
                                    "toolTip": "Azure Virtual Desktop network resources (vNet, NSG, Route table) resource group custom name.",
                                    "placeholder": "Example: rg-avd-app1-dev-use2-network",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "virtualNetworkCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Virtual network",
                                    "visible": "[steps('network').createAvdVirtualNetwork]",
                                    "toolTip": "Azure Virtual Desktop virtual network custom name.",
                                    "placeholder": "Example: vnet-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,64}$",
                                        "validationMessage": "Value must be 1-64 characters."
                                    }
                                },
                                {
                                    "name": "virtualNetworkAvdSubnetCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Azure Virtual Desktop Subnet",
                                    "visible": "[steps('network').createAvdVirtualNetwork]",
                                    "toolTip": "Azure Virtual Desktop virtual network subnet custom name.",
                                    "placeholder": "Example: snet-avd-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                },
                                {
                                    "name": "avdNetworkSecurityGroupCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Azure Virtual Desktop Network security group",
                                    "visible": "[steps('network').createAvdVirtualNetwork]",
                                    "toolTip": "Azure Virtual Desktop network security group custom name.",
                                    "placeholder": "Example: nsg-avd-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                },
                                {
                                    "name": "avdRouteTableCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Azure Virtual Desktop Route table",
                                    "visible": "[steps('network').createAvdVirtualNetwork]",
                                    "toolTip": "Azure Virtual Desktop route table custom name.",
                                    "placeholder": "Example: route-avd-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                },
                                {
                                    "name": "virtualNetworkPrivateEndpointSubnetCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Private endpoint subnet",
                                    "visible": "[steps('network').createAvdVirtualNetwork]",
                                    "toolTip": "Azure Virtual Desktop virtual network subnet custom name.",
                                    "placeholder": "Example: snet-pe-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                },
                                {
                                    "name": "privateEndpointNetworkSecurityGroupCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Private endpoint network security group",
                                    "visible": "[steps('network').createAvdVirtualNetwork]",
                                    "toolTip": "Private endpoint network security group custom name.",
                                    "placeholder": "Example: nsg-pe-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                },
                                {
                                    "name": "privateEndpointRouteTableCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Private endpoint route table",
                                    "visible": "[steps('network').createAvdVirtualNetwork]",
                                    "toolTip": "Private endpoint route table custom name.",
                                    "placeholder": "Example: route-pe-app1-dev-use2-001",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,80}$",
                                        "validationMessage": "Value must be 1-80 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "resourceNamingMonitoring",
                            "type": "Microsoft.Common.Section",
                            "visible": "[steps('resourceNaming').resourceNamingSelection]",
                            "label": "Monitoring naming:",
                            "elements": [
                                {
                                    "name": "resourceNamingMonitoringInfo",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[not(steps('monitoring').deployMonitoring)]",
                                    "options": {
                                        "text": "Current deployment configuration is not creating monitoring resources.",
                                        "style": "Info"
                                    }
                                },
                                {
                                    "name": "monitoringObjectsRgCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Resource group",
                                    "visible": "[and(equals(steps('resourceNaming').resourceNamingSelection, true), equals(steps('monitoring').deployMonitoring, true))]",
                                    "toolTip": "Azure Virtual Desktop monitoring resources (log analytics workspace) resource group custom name.",
                                    "placeholder": "Example: rg-avd-dev-use2-monitoring",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "monitoringLogAnalyticsWorkspaceName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Log analytics workspace name",
                                    "visible": "[and(equals(steps('resourceNaming').resourceNamingSelection, true), equals(steps('monitoring').deployMonitoring, true), equals(steps('monitoring').deployMonitoringAlaWorkspace, true))]",
                                    "toolTip": "Azure Virtual Desktop monitoring log analytics workspace custom name.",
                                    "placeholder": "Example: log-avd-dev-use2",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,90}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "resourceNamingZeroTrust",
                            "type": "Microsoft.Common.Section",
                            "label": "Zero Trust naming:",
                            "visible": "[steps('resourceNaming').resourceNamingSelection]",
                            "elements": [
                                {
                                    "name": "resourceNamingZeroTrustInfo",
                                    "type": "Microsoft.Common.InfoBox",
                                    "visible": "[not(steps('sessionHosts').sessionHostsSettingsSection.sessionHostDiskZeroTrust)]",
                                    "options": {
                                        "text": "Current deployment configuration is not creating zero trust resources.",
                                        "style": "Info"
                                    }
                                },
                                {
                                    "name": "zeroTrustObjectsDiskEncryptionSetCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Disk encryption set",
                                    "visible": "[and(steps('resourceNaming').resourceNamingSelection, steps('sessionHosts').sessionHostsSettingsSection.sessionHostDiskZeroTrust)]",
                                    "toolTip": "Disk encryption set resource for double encryption of session host disks.",
                                    "placeholder": "Example: des-zt",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,6}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "zeroTrustObjectsKeyVaultCustomPrefix",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Key vault prefix",
                                    "visible": "[and(steps('resourceNaming').resourceNamingSelection, steps('sessionHosts').sessionHostsSettingsSection.sessionHostDiskZeroTrust)]",
                                    "toolTip": "Key Vault that stores the encryption key for disk encryption.",
                                    "placeholder": "Example: kv-key",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,6}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                },
                                {
                                    "name": "zeroTrustObjectsManagedIdentityCustomName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "User assigned identity",
                                    "visible": "[and(steps('resourceNaming').resourceNamingSelection, steps('sessionHosts').sessionHostsSettingsSection.sessionHostDiskZeroTrust)]",
                                    "toolTip": "User assigned identity that enables server-side encryption and disables network access.",
                                    "placeholder": "Example: id-zt",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,5}$",
                                        "validationMessage": "Value must be 1-90 characters."
                                    }
                                }
                            ]
                        },
                        {
                            "name": "resourceNamingInfo2",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": "[steps('resourceNaming').resourceNamingSelection]",
                            "options": {
                                "text": "It is recommended to follow Microsoft Cloud Adoption Framework (CAF) naming convention.",
                                "uri": "https://docs.microsoft.com/azure/cloud-adoption-framework/ready/azure-best-practices/resource-naming",
                                "style": "Info"
                            }
                        }
                    ]
                },
                {
                    "name": "resourceTagging",
                    "label": "Resource tagging",
                    "type": "Microsoft.Common.Section",
                    "visible": true,
                    "elements": [
                        {
                            "name": "resourceTaggingSelection",
                            "type": "Microsoft.Common.CheckBox",
                            "visible": true,
                            "label": "Create resource tags",
                            "defaultValue": false,
                            "toolTip": "When selected, the information provided will be used to create tags on resources and resource groups."
                        },
                        {
                            "name": "resourceTaggingParentCostInfo",
                            "type": "Microsoft.Common.InfoBox",
                            "options": {
                                "text": "By default, the following tags will be created: <br/> - Parent resource cost management tag (cm-resource-parent): reports all resources cost to the host pool (ResourceID). <br/> - Environment (Environment): environment selected during deployment (Dev/Test/prod). <br/> - Service Workload (ServiceWorkload): defaults to Azure Virtual Desktop. <br/> - Creation time (CreationTimeUTC): deployment time in UTC. <br/> - Domain Name (DomainName): identity service domain name (applied only to compute and storage). <br/> - Identity service provider (IdentityServiceProvider): identity provider selected (ADDS/EntraDS/EntraID).",
                                "uri": "https://learn.microsoft.com/azure/virtual-desktop/tag-virtual-desktop-resources#use-the-cm-resource-parent-tag-to-automatically-group-costs-by-host-pool",
                                "style": "Info"
                            }
                        },
                        {
                            "name": "resourceTags",
                            "type": "Microsoft.Common.Section",
                            "label": "Resources tags:",
                            "visible": "[steps('resourceTagging').resourceTaggingSelection]",
                            "elements": [
                                {
                                    "name": "tagsWorkloadName",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Workload name:",
                                    "toolTip": "This input will be the value of a tag named WorkloadName.",
                                    "placeholder": "Example: Contoso-Workload",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "tagsWorkloadType",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Workload type:",
                                    "filter": true,
                                    "defaultValue": "Light",
                                    "toolTip": "This input will be the value of a tag named WorkloadType, reference to the size of the VM for your workloads.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Light",
                                                "description": "",
                                                "value": "Light"
                                            },
                                            {
                                                "label": "Medium",
                                                "description": "",
                                                "value": "Medium"
                                            },
                                            {
                                                "label": "High",
                                                "description": "",
                                                "value": "High"
                                            },
                                            {
                                                "label": "Power",
                                                "description": "",
                                                "value": "POwer"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "tagsDataClassificationTag",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Data classification:",
                                    "filter": true,
                                    "defaultValue": "Non-business",
                                    "toolTip": "This input will be the value of a tag named DataClassification, reference to the sensitivity of data hosted.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Non-business",
                                                "description": "",
                                                "value": "Non-business"
                                            },
                                            {
                                                "label": "Public",
                                                "description": "",
                                                "value": "Public"
                                            },
                                            {
                                                "label": "General",
                                                "description": "",
                                                "value": "General"
                                            },
                                            {
                                                "label": "Confidential",
                                                "description": "",
                                                "value": "Confidential"
                                            },
                                            {
                                                "label": "Highly-confidential",
                                                "description": "",
                                                "value": "Highly-confidential"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "tagsDepartmentTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Department:",
                                    "toolTip": "This input will be the value of a tag named Department, reference the department that owns the deployment.",
                                    "placeholder": "Example: Contoso-AVD",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "tagsCriticalityTag",
                                    "type": "Microsoft.Common.DropDown",
                                    "label": "Workload criticality:",
                                    "filter": true,
                                    "defaultValue": "Low",
                                    "toolTip": "This input will be the value of a tag named Criticality, reference to the criticality of the workload.",
                                    "constraints": {
                                        "required": true,
                                        "allowedValues": [
                                            {
                                                "label": "Low",
                                                "description": "",
                                                "value": "Low"
                                            },
                                            {
                                                "label": "Medium",
                                                "description": "",
                                                "value": "Medium"
                                            },
                                            {
                                                "label": "High",
                                                "description": "",
                                                "value": "High"
                                            },
                                            {
                                                "label": "Mission-critical",
                                                "description": "",
                                                "value": "Mission-critical"
                                            },
                                            {
                                                "label": "Custom",
                                                "description": "",
                                                "value": "Custom"
                                            }
                                        ]
                                    }
                                },
                                {
                                    "name": "tagsCustomWorkloadCriticality",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Custom workload criticality:",
                                    "visible": "[equals(steps('resourceTagging').resourceTags.tagsCriticalityTag, 'Custom')]",
                                    "toolTip": "This input will be the value of a tag named Criticality, reference to a custom criticality for the workload.",
                                    "placeholder": "Example: Contoso-Criticality",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "tagsApplicationNameTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Application name:",
                                    "toolTip": "This input will be the value of a tag named ApplicationName, reference details about the application.",
                                    "placeholder": "Example: Contoso-App",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "tagsWorkloadSlaTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Workload SLA:",
                                    "toolTip": "This input will be the value of a tag named ServiceClass, reference to the service level agreement level of the worload.",
                                    "placeholder": "Example: Contoso-SLA",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                },
                                {
                                    "name": "tagsOpsTeamTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Operations team:",
                                    "toolTip": "This input will be the value of a tag named OpsTeam, reference to the team accountable for day-to-day operations.",
                                    "placeholder": "Example: workload-admins@Contoso.com",
                                    "constraints": {
                                        "required": true
                                    }
                                },
                                {
                                    "name": "tagsOwnerTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Owner:",
                                    "toolTip": "This input will be the value of a tag named Owner, reference to the organizational owner of the Azure Virtual Desktop deployment.",
                                    "placeholder": "Example: workload-owner@Contoso.com",
                                    "constraints": {
                                        "required": true
                                    }
                                },
                                {
                                    "name": "tagsCostCenterTag",
                                    "type": "Microsoft.Common.TextBox",
                                    "label": "Cost center:",
                                    "toolTip": "This input will be the value of a tag named CostCenter, reference to the cost center of owner team.",
                                    "placeholder": "Example: Contoso-CC",
                                    "constraints": {
                                        "required": true,
                                        "regex": "^[a-z0-9A-Z-]{1,256}$",
                                        "validationMessage": "Value must be 1-256 characters."
                                    }
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        "outputs": {
            "parameters": {
        },
            "kind": "Subscription",
            "location": "[steps('basics').resourceScope.location.name]",
            "subscriptionId": "[steps('basics').resourceScope.subscription.id]"
        }
    }
}
