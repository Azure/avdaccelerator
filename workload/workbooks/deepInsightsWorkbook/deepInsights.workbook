{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "81c794f6-d8f0-46c1-a04a-048b76430172",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Connections",
            "subTarget": "Connections",
            "style": "link"
          },
          {
            "id": "61401b62-682c-4161-a0a7-a0471dae40fd",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Errors ",
            "subTarget": "Logins",
            "style": "link"
          },
          {
            "id": "4ab20313-a9f7-41d7-9e54-bd57486daa43",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Session Bandwidths & Latencies",
            "subTarget": "Latencies",
            "style": "link"
          },
          {
            "id": "9b14fc38-b41b-4a2b-b55c-dff4cda21d3a",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Graphic Performance",
            "subTarget": "Graphic",
            "style": "link"
          },
          {
            "id": "6fca6244-763c-4f84-b3d4-09f426e24585",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Logon Timing",
            "subTarget": "LogonTiming",
            "style": "link"
          },
          {
            "id": "b20c574e-7f60-46ec-b85d-f740ad9df281",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "FSLogix",
            "subTarget": "FSLogix",
            "style": "link"
          },
          {
            "id": "30991351-2306-4c9d-b94b-b78feef20579",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Water Markings",
            "subTarget": "WaterMarked",
            "style": "link"
          },
          {
            "id": "85cd4736-2104-49e8-9fe7-76ddfeebf729",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Resources",
            "subTarget": "Resources",
            "style": "link"
          }
        ]
      },
      "name": "links - 3"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "88bda73f-158a-4971-9310-1e557a8f89f0",
            "version": "KqlParameterItem/1.0",
            "name": "TimeRange",
            "label": "Time Range",
            "type": 4,
            "isRequired": true,
            "value": {
              "durationMs": 7776000000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ],
              "allowCustom": true
            }
          },
          {
            "id": "6e7ddca7-163c-4547-9e37-d408299ce828",
            "version": "KqlParameterItem/1.0",
            "name": "HostPool",
            "label": "Host Pool",
            "type": 2,
            "description": "Select a host pool to show only data of this specific one",
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "WVDConnections | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} | distinct tostring(HostPool) | order by HostPool",
            "typeSettings": {
              "additionalResourceOptions": [
                "value::all"
              ],
              "showDefault": false
            },
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces",
            "value": [
              "value::all"
            ]
          },
          {
            "id": "94f2b277-55f0-4823-9e12-1f1c9cb80dc8",
            "version": "KqlParameterItem/1.0",
            "name": "SessionHostSelector",
            "label": "Opt: Session Host",
            "type": 2,
            "description": "Select a session host to drill down into the data. Don't select a session host to disable this filter.",
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "WVDConnections | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) |distinct SessionHostName | order by SessionHostName",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          },
          {
            "id": "bad76313-b8d9-4eb6-9bb1-10ff1b5bfb71",
            "version": "KqlParameterItem/1.0",
            "name": "UserTextFilter",
            "label": "Opt: User filter",
            "type": 1,
            "description": "Type in a part of the user name to filter the user selector",
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "TimeRange",
            "value": ""
          },
          {
            "id": "89f1ab29-6270-4932-891b-6fceb2e4bd16",
            "version": "KqlParameterItem/1.0",
            "name": "UserSelector",
            "label": "Opt: User",
            "type": 2,
            "description": "Select a user to drill down into the data. Don't select a user to disable this filter.",
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "WVDConnections | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and (\"{UserTextFilter}\"==\"\" or UserName contains(\"{UserTextFilter}\")) | distinct UserName | order by UserName",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces"
          }
        ],
        "style": "pills",
        "doNotRunWhenHidden": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isNotEqualTo",
          "value": "Resources"
        },
        {
          "parameterName": "selectedTab",
          "comparison": "isNotEqualTo",
          "value": "WaterMarked"
        },
        {
          "parameterName": "selectedTab",
          "comparison": "isNotEqualTo",
          "value": "FSLogix"
        }
      ],
      "name": "parameters - 2"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "ba7e776d-9bcf-4c50-b697-5bc732eb2644",
            "version": "KqlParameterItem/1.0",
            "name": "ErrorSelector",
            "label": "Error Selector",
            "type": 2,
            "description": "Select an error to drill down into the data. Don't select an item to disable this filter.",
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "WVDErrors | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) \r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic)\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic)\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic)\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic)\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic)\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic)\r\n| distinct tostring(CodeSymbolic) | order by CodeSymbolic",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 0
            },
            "timeContextFromParameter": "TimeRange",
            "queryType": 0,
            "resourceType": "microsoft.operationalinsights/workspaces",
            "value": []
          }
        ],
        "style": "pills",
        "doNotRunWhenHidden": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "name": "parameters - 2 - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "# FSLogix\r\n\r\nThe following table shows the size of the profile disk by user name and host pool. Note: The AVD Agent is sending this data. The format of the data could change."
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "FSLogix"
      },
      "name": "text - 55 - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDCheckpoints | where (Name==\"ProfileLoggedOff\" or Name==\"ODFCLoggedOff\") and (Source==\"RDAgent\" or Source==\"FSLogix\") and TimeGenerated>ago(360d)\r\n| extend HostPool=tostring(split(_ResourceId,\"/\")[8]), ProfileType=iff(Name==\"ProfileLoggedOff\",\"Profile\",\"ODFC\")\r\n| summarize arg_max(TimeGenerated, *) by UserName, _ResourceId, ProfileType\r\n| extend [\"VHD Size On Disk\"]=todouble(replace_string(replace_string(tostring(Parameters.VHDSizeOnDisk),\",\",\"\"),\".\",\"\")),[\"VHD Free Space\"]=todouble(replace_string(tostring(Parameters.VHDFreeSpace),\",\",\".\")),[\"VHD Max Size\"]=todouble(replace_string(tostring(Parameters.MaxVHDSize),\",\",\".\"))\r\n| where [\"VHD Size On Disk\"]!=\"\"\r\n| project HostPool, UserName, TimeStamp=TimeGenerated,ProfileType, [\"VHD Size On Disk\"], [\"VHD Free Space\"], [\"VHD Max Size\"], Usage=100*([\"VHD Max Size\"]-[\"VHD Free Space\"])/[\"VHD Max Size\"]\r\n| order by [\"Usage\"] desc",
        "size": 2,
        "title": "FSLogix Profiles",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "VHD Size On Disk",
              "formatter": 0,
              "numberFormat": {
                "unit": 36,
                "options": {
                  "style": "decimal"
                }
              }
            },
            {
              "columnMatch": "VHD Free Space",
              "formatter": 0,
              "numberFormat": {
                "unit": 39,
                "options": {
                  "style": "decimal"
                }
              }
            },
            {
              "columnMatch": "VHD Max Size",
              "formatter": 0,
              "numberFormat": {
                "unit": 39,
                "options": {
                  "style": "decimal"
                }
              }
            },
            {
              "columnMatch": "Usage",
              "formatter": 4,
              "formatOptions": {
                "min": 0,
                "max": 100,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Group",
              "formatter": 1
            },
            {
              "columnMatch": "Used",
              "formatter": 0,
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "decimal"
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "FSLogix"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "# Water Markings\r\n\r\nIf Watermarking is activated on a session host, an administrator can track the user by the ID represented by the QR code of the user's session. Enter the ID (a Guid) into the search field to find the related user session. Keep in mind that a disconnect and reconnect creates a new ID.\r\n\r\nMore information: https://learn.microsoft.com/en-us/azure/virtual-desktop/watermarking"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "WaterMarked"
      },
      "name": "text - 55 - Copy"
    },
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "85194c1e-1a69-44b5-ad40-d6d9331a16aa",
            "version": "KqlParameterItem/1.0",
            "name": "QrSessionId",
            "label": "Water Marking Id",
            "type": 1,
            "description": "The Water Marking Id is represented by the QR (a kind of Guid, like DFE4090-E398-4E67-92AF-9E2362230000)",
            "timeContext": {
              "durationMs": 86400000
            },
            "value": ""
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "WaterMarked"
      },
      "name": "parameters - 63"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnections \r\n| where CorrelationId =~\"{QrSessionId}\" //and State=~\"Started\"\r\n| extend HostPool=tostring(split(_ResourceId,\"/\")[8])\r\n| summarize [\"Login Time\"]=min(TimeGenerated), [\"Last Recorded\"]=max(TimeGenerated) by UserName,HostPool,SessionHostName,SessionHostPoolType,ClientOS,ClientVersion,ConnectionType,SessionHostJoinType,ClientSideIPAddress,GatewayRegion,IsClientPrivateLink,UdpUse\r\n| project UserName, [\"Login Time\"],[\"Last Recorded\"],[\"Runtime/minutes\"]=([\"Last Recorded\"]-[\"Login Time\"])/1m,[\"Host Pool\"]=toupper(HostPool),[\"Session Host\"]=SessionHostName,[\"Pooled\"]=SessionHostPoolType==\"SharedDesktop\",[\"Client OS\"]=ClientOS,[\"AVD Client Version\"]=ClientVersion,[\"AVD Client Type\"]=ConnectionType,[\"Login Mode\"]=SessionHostJoinType,[\"Client IP\"]=ClientSideIPAddress,[\"Gateway Region\"]=GatewayRegion,[\"Private Link\"]=IsClientPrivateLink,[\"ShortPath\"]=iff(UdpUse==1,\"Private\",iff(UdpUse==2,\"Public\",\"\"))\r\n\r\n\r\n",
        "size": 4,
        "title": "Session Details",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Runtime",
              "formatter": 0,
              "numberFormat": {
                "unit": 0,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Authentication",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Total",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - GPO",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Profile",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Event Notification",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Env.",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - TS Service",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - FRXSrv",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Start Shell",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "WaterMarked"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDCheckpoints| where Name ==\"LogonDelay\" and CorrelationId =~\"{QrSessionId}\" | extend LogonType=Parameters.LogonType,WinLogon_Logon_GPClient=todouble(Parameters.WinLogon_Logon_GPClient),WinLogon_Logon_Profiles=todouble(Parameters.WinLogon_Logon_Profiles),WinLogon_Logon_Sens=todouble(Parameters.WinLogon_Logon_Sens),WinLogon_Logon_SessionEnv=todouble(Parameters.WinLogon_Logon_SessionEnv),WinLogon_Logon_TermSrv=todouble(Parameters.WinLogon_Logon_TermSrv),WinLogon_Logon_frxsvc=todouble(Parameters.WinLogon_Logon_frxsvc),WinLogon_StartShell=todouble(Parameters.WinLogon_StartShell),WinLogon_Logon=todouble(Parameters.WinLogon_Logon),WinLogon_Total=todouble(Parameters.WinLogon_Total), AuthenticateUser=todouble(Parameters.AuthenticateUser)\r\n| join kind=inner  (WVDConnections| where State ==\"Connected\" and CorrelationId =~\"{QrSessionId}\")  on CorrelationId\r\n| summarize [\"Authentication\"]=avg(AuthenticateUser), [\"Logon - Total\"]=avg(WinLogon_Total), [\"Logon - GPO\"]=avg(WinLogon_Logon_GPClient), [\"Logon - Profile\"]=avg(WinLogon_Logon_Profiles), [\"Logon - Event Notification\"]=avg(WinLogon_Logon_Sens), [\"Logon - Env.\"]=avg(WinLogon_Logon_SessionEnv), [\"Logon - TS Service\"]=avg(WinLogon_Logon_TermSrv), [\"Logon - FRXSrv\"]=avg(WinLogon_Logon_frxsvc), [\"Logon - Start Shell\"]=avg(WinLogon_StartShell) by UserName\r\n| order by [\"Logon - Total\"] desc\r\n\r\n\r\n",
        "size": 4,
        "title": "Logon Timing",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Authentication",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Total",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - GPO",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Profile",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Event Notification",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Env.",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - TS Service",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - FRXSrv",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Start Shell",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "WaterMarked"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where CorrelationId =~\"{QrSessionId}\"\r\n| join kind=inner  (WVDConnections| where CorrelationId =~\"{QrSessionId}\" and State ==\"Connected\" and UserName !=\"\")  on CorrelationId\r\n| extend ShortPath=iff(UdpUse==1,\"Private\",iff(UdpUse==2,\"Public\",\"\"))\r\n| summarize [\"Avg. RTT\"]=avg(EstRoundTripTimeInMs),[\"Max. RTT\"]=max(EstRoundTripTimeInMs),[\"P90 RTT\"]=percentile(EstRoundTripTimeInMs,90),[\"Avg. Bandwidth\"]=avg(EstAvailableBandwidthKBps),[\"Max. Bandwidth\"]=max(EstAvailableBandwidthKBps),[\"P90 Bandwidth\"]=percentile(EstAvailableBandwidthKBps,90) by UserName, ShortPath\r\n| order by [\"Avg. RTT\"] desc\r\n",
        "size": 4,
        "title": "RTT and estimated available Bandwidth",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_SourceNetwork_A_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "UserName",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "UserName",
            "sortOrder": 1
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "WaterMarked"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where CorrelationId =~\"{QrSessionId}\"\r\n| join kind=inner  (WVDConnections| where CorrelationId =~\"{QrSessionId}\" and State ==\"Connected\" and UserName !=\"\")  on CorrelationId\r\n| extend ShortPath=iff(UdpUse==1,\"Private\",iff(UdpUse==2,\"Public\",\"\"))\r\n| project [\"Avg. Est Bandwidth\"]=EstAvailableBandwidthKBps,TimeGenerated\r\n\r\n",
        "size": 1,
        "title": "Estimated Bandwidth",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_SourceNetwork_A_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "timechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "UserName",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "UserName",
            "sortOrder": 1
          }
        ],
        "chartSettings": {
          "ySettings": {
            "numberFormatSettings": {
              "unit": 12,
              "options": {
                "style": "decimal",
                "useGrouping": false
              }
            }
          }
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "WaterMarked"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where CorrelationId =~\"{QrSessionId}\"\r\n| join kind=inner  (WVDConnections| where CorrelationId =~\"{QrSessionId}\" and State ==\"Connected\" and UserName !=\"\")  on CorrelationId\r\n| extend ShortPath=iff(UdpUse==1,\"Private\",iff(UdpUse==2,\"Public\",\"\"))\r\n| project [\"Avg. RTT\"]=EstRoundTripTimeInMs,TimeGenerated\r\n\r\n",
        "size": 1,
        "title": "Estimated RTT",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_SourceNetwork_A_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "timechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "UserName",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "UserName",
            "sortOrder": 1
          }
        ],
        "chartSettings": {
          "ySettings": {
            "numberFormatSettings": {
              "unit": 23,
              "options": {
                "style": "decimal",
                "useGrouping": false
              }
            }
          }
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "WaterMarked"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDErrors\r\n| where  CorrelationId =~\"{QrSessionId}\"\r\n| extend TimeStamp=TimeGenerated, User=UserName\r\n| project-away TimeGenerated,UserName\r\n| order by TimeStamp asc\r\n",
        "size": 1,
        "title": "Errors",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_SourceNetwork_A_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "WaterMarked"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDCheckpoints\r\n| where  CorrelationId =~\"{QrSessionId}\"\r\n| project CorrelationId, TimeStamp=TimeGenerated, User=UserName, Activity=ActivityType, Source, Details=Parameters\r\n| order by TimeStamp asc\r\n",
        "size": 1,
        "title": "Trace",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_SourceNetwork_A_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "WaterMarked"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "# Azure Virtual Desktop Resources and Relationships\r\n\r\n## Orphan session hosts\r\nUse the following charts to identify orphan session hosts. A host is an orphan if the virtual machine does not exist. Make that you have the correct permission to show the host pools and possible VMs."
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "text - 55"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "desktopvirtualizationresources\r\n| where type == \"microsoft.desktopvirtualization/hostpools/sessionhosts\"\r\n| extend VmResourceId=tolower(properties.resourceId)\r\n| join kind=fullouter     (\r\nresources\r\n| where type == \"microsoft.compute/virtualmachines\"\r\n| extend VmResourceId=tolower(id)\r\n) on VmResourceId\r\n| where id!=\"\"                          // filter to show only session hosts object\r\n| extend VmExist=VmResourceId1!=\"\"      // mark session hosts without a VM\r\n| project Status = iff(VmExist,\"success\",\"warning\"), HostPool=tostring(split(name,\"/\")[0]), SessionHost=tostring(split(name,\"/\")[1]), VmExist, VmName=name1, Location=location1, VmResourceId\r\n| order by VmExist asc, HostPool, SessionHost",
        "size": 0,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "value::all"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Status",
              "formatter": 11
            }
          ],
          "rowLimit": 10000
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "query - 54"
    },
    {
      "type": 1,
      "content": {
        "json": "## Orphan virtual machines\r\nUse the following charts to identify orphan virtual machines. A VM is an orphan if the session host does not exist. Make that you have the correct permission to show the host pools and VMs. VMs are identified as session hosts if the tag \"AVD.Type\" or \"WVD.Type\" is equal to \"SessionHost\" (can be changed in the query, case-sensitive).\r\n\r\nNote: Some VMs could be falsely listed as orphans during the rollout or through the delay of the resource graph used to get the data."
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "text - 55 - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type == \"microsoft.compute/virtualmachines\" and (tags.[\"WVD.Type\"]=~\"SessionHost\" or tags.[\"AVD.Type\"]=~\"SessionHost\") \r\n| extend VmResourceId=tolower(id), Size=properties.hardwareProfile.vmSize, State=properties.extended.instanceView.powerState.displayStatus\r\n| join kind=fullouter     (\r\ndesktopvirtualizationresources\r\n| where type == \"microsoft.desktopvirtualization/hostpools/sessionhosts\"\r\n| extend VmResourceId=tolower(properties.resourceId)\r\n) on VmResourceId\r\n| where id!=\"\"                          // filter to show only VMs\r\n| extend SessionHostExist=VmResourceId1!=\"\"      // mark a VM without a host\r\n| project Status = iff(SessionHostExist,\"success\",\"warning\"), VM=id, Size, State, [\"Resource Group\"]=resourceGroup, Location=location,SessionHostExist, HostPool=tostring(split(name1,\"/\")[0]), SessionHost=tostring(split(name1,\"/\")[1]), SessionHostId=id1\r\n| order by SessionHostExist asc, VM, [\"Resource Group\"]",
        "size": 0,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "value::all"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Status",
              "formatter": 11
            }
          ],
          "rowLimit": 10000
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "query - 54 - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "## Unresponding AVD Agents\r\nUse the following charts to identify running session hosts not reporting a state to the AVD backend. That can help to identify running hosts with a corrupt AVD agent installation or having network issues.\r\n\r\nImportant: That is only an indicator. If a VM is started, it takes a while to respond to the AVD backend. Reload the table to ensure that a host is running and not responding after a while.\r\n\r\nNote: Some VMs could be falsely listed as orphans during the rollout or through the delay of the resource graph used to get the data."
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "text - 55 - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "desktopvirtualizationresources\r\n| where type == \"microsoft.desktopvirtualization/hostpools/sessionhosts\"\r\n| extend VmResourceId=tolower(properties.resourceId), AvdState=properties.status\r\n| join kind=fullouter     (\r\nresources\r\n| where type == \"microsoft.compute/virtualmachines\"\r\n| extend VmResourceId=tolower(id)\r\n) on VmResourceId\r\n| where id!=\"\"                          // filter to show only session hosts object\r\n| extend VmExist=VmResourceId1!=\"\",State=properties1.extended.instanceView.powerState.displayStatus      // mark session hosts without a VM\r\n| where State contains \"running\" and VmExist==1\r\n| extend Warning=(State contains \"running\") and (AvdState contains \"unavailable\" or AvdState contains \"shutdown\")\r\n| project Status = iff(Warning==0,\"success\",\"warning\"), HostPool=tostring(split(name,\"/\")[0]), SessionHost=tostring(split(name,\"/\")[1]), [\"State\"]=AvdState, VmName=name1, [\"Power state\"]=State, Location=location1, VmResourceId\r\n| order by  Status, HostPool, SessionHost\r\n\r\n\r\n",
        "size": 0,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "value::all"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Status",
              "formatter": 11
            }
          ],
          "rowLimit": 10000
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "query - 54 - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "## Orphan network interfaces\r\nUse the following charts to identify orphan network adapters (nic). Deleting a VM without the nic cause the orphan.\r\n\r\nHaving orphan NICs can cause no IP addresses to be available for upcoming rollouts of new VMs (even an orphan NIC consumes an IP address)."
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "text - 55 - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type == \"microsoft.network/networkinterfaces\"\r\n| extend IsAssigned=(properties.privateEndpoint.id!=\"\" or properties.virtualMachine.id!=\"\")\r\n| project Status = iff(IsAssigned,\"success\",\"warning\"), Name=name, [\"Resource Group\"]=resourceGroup, Location=location, IsAssigned, Nic=id\r\n| order by IsAssigned asc, Name, [\"Resource Group\"]",
        "size": 0,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "value::all"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Status",
              "formatter": 11
            }
          ],
          "rowLimit": 10000
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "query - 54 - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "## Orphan disks\r\nUse the following charts to identify orphan disks you may not want to store. Deleting a VM without the disk cause the orphan.\r\n\r\nThe disk costs are not negligible. Use the chart to identify forgotten disks."
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "text - 55 - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "resources\r\n| where type == \"microsoft.compute/disks\"\r\n| extend IsAssigned=managedBy!=\"\"\r\n| project Status = iff(IsAssigned,\"success\",\"warning\"), Name=name, [\"Resource Group\"]=resourceGroup, Location=location, IsAssigned, Disk=id\r\n| order by IsAssigned asc, Name, [\"Resource Group\"]",
        "size": 0,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "value::all"
        ],
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Status",
              "formatter": 11
            }
          ],
          "rowLimit": 10000
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Resources"
      },
      "name": "query - 54 - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| join kind=inner  (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId\r\n| extend ShortPath=iff(UdpUse==1,\"Private\",iff(UdpUse==2,\"Public\",\"\"))\r\n| summarize [\"Avg. RTT\"]=avg(EstRoundTripTimeInMs),[\"Max. RTT\"]=max(EstRoundTripTimeInMs),[\"P90 RTT\"]=percentile(EstRoundTripTimeInMs,90),[\"Avg. Bandwidth\"]=avg(EstAvailableBandwidthKBps),[\"Max. Bandwidth\"]=max(EstAvailableBandwidthKBps),[\"P90 Bandwidth\"]=percentile(EstAvailableBandwidthKBps,90) by UserName, ShortPath\r\n| order by [\"Avg. RTT\"] desc\r\n",
        "size": 0,
        "title": "RTT and estimated available Bandwidth by User",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_SourceNetwork_A_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "UserName",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "UserName",
            "sortOrder": 1
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Latencies"
      },
      "name": "query - 13 - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| join kind=inner  (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName ==\"{Select_SourceNetwork_A_UserName}\" and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId\r\n| summarize [\"Avg. RTT/ms\"]=avg(EstRoundTripTimeInMs),[\"Max. RTT/ms\"]=max(EstRoundTripTimeInMs),[\"P90 RTT/ms\"]=percentile(EstRoundTripTimeInMs,90) by TimeGenerated\r\n",
        "size": 0,
        "showAnnotations": true,
        "title": "RTT for {Select_SourceNetwork_A_UserName}",
        "timeContextFromParameter": "TimeRange",
        "timeBrushParameterName": "Brush_Latency_A",
        "timeBrushExportOnlyWhenBrushed": true,
        "exportFieldName": "CorrelationId",
        "exportParameterName": "Select_SourceNetwork_A_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "$gen_heatmap_Avg. RTT_1",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "$gen_heatmap_Avg. RTT_1",
            "sortOrder": 2
          }
        ],
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Latencies"
        },
        {
          "parameterName": "Select_SourceNetwork_A_UserName",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "50",
      "name": "query - 13 - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| join kind=inner (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName ==\"{Select_SourceNetwork_A_UserName}\" and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId\r\n| summarize [\"Avg. Bandwidth/Bps\"]=avg(EstAvailableBandwidthKBps)*1024.0,[\"Max. Bandwidth/Bps\"]=max(EstAvailableBandwidthKBps)*1024.0,[\"P90 Bandwidth/Bps\"]=percentile(EstAvailableBandwidthKBps,90)*1024.0 by TimeGenerated\r\n",
        "size": 0,
        "showAnnotations": true,
        "title": "Est. available Bandwidth for {Select_SourceNetwork_A_UserName}",
        "timeContextFromParameter": "TimeRange",
        "timeBrushParameterName": "Brush_Latency_A",
        "timeBrushExportOnlyWhenBrushed": true,
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "$gen_heatmap_Avg. RTT_1",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "$gen_heatmap_Avg. RTT_1",
            "sortOrder": 2
          }
        ],
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Latencies"
        },
        {
          "parameterName": "Select_SourceNetwork_A_UserName",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "50",
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {Brush_Latency_A} and HostPool in ('',{HostPool})\r\n| join kind=inner  (WVDConnections| where State ==\"Connected\" and UserName ==\"{Select_SourceNetwork_A_UserName}\" and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId\r\n| summarize [\"Avg. RTT/ms\"]=avg(EstRoundTripTimeInMs),[\"Max. RTT/ms\"]=max(EstRoundTripTimeInMs),[\"P90 RTT/ms\"]=percentile(EstRoundTripTimeInMs,90) by TimeGenerated\r\n",
        "size": 0,
        "showAnnotations": true,
        "title": "RTT for {Select_SourceNetwork_A_UserName}",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "$gen_heatmap_Avg. RTT_1",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "$gen_heatmap_Avg. RTT_1",
            "sortOrder": 2
          }
        ],
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Latencies"
        },
        {
          "parameterName": "Select_SourceNetwork_A_UserName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "Brush_Latency_A",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "50",
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {Brush_Latency_A} and HostPool in ('',{HostPool})\r\n| join kind=inner  (WVDConnections| where State ==\"Connected\" and UserName ==\"{Select_SourceNetwork_A_UserName}\" and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId\r\n| summarize [\"Avg. Bandwidth/Bps\"]=avg(EstAvailableBandwidthKBps)*1024.0,[\"Max. Bandwidth/Bps\"]=max(EstAvailableBandwidthKBps)*1024.0,[\"P90 Bandwidth/Bps\"]=percentile(EstAvailableBandwidthKBps,90)*1024.0 by TimeGenerated\r\n",
        "size": 0,
        "showAnnotations": true,
        "title": "Est. available Bandwidth for {Select_SourceNetwork_A_UserName}",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "$gen_heatmap_Avg. RTT_1",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "$gen_heatmap_Avg. RTT_1",
            "sortOrder": 2
          }
        ],
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Latencies"
        },
        {
          "parameterName": "Select_SourceNetwork_A_UserName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "Brush_Latency_A",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "50",
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "----------\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Latencies"
      },
      "name": "text - 25 - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| join kind=inner  (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId | extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])\r\n| extend ShortPath=iff(UdpUse==1,\"Private\",iff(UdpUse==2,\"Public\",\"\"))\r\n| summarize [\"Avg. RTT\"]=avg(EstRoundTripTimeInMs),[\"Max. RTT\"]=max(EstRoundTripTimeInMs),[\"P90 RTT\"]=percentile(EstRoundTripTimeInMs,90),[\"Avg. Bandwidth\"]=avg(EstAvailableBandwidthKBps),[\"Max. Bandwidth\"]=max(EstAvailableBandwidthKBps),[\"P90 Bandwidth\"]=percentile(EstAvailableBandwidthKBps,90) by IPSegmentC, ShortPath\r\n| order by [\"Avg. RTT\"] desc\r\n",
        "size": 1,
        "title": "RTT and estimated available Bandwidth per User by IP segment (class C)",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "IPSegmentC",
        "exportParameterName": "Select_SourceNetwork_B_IPSegment",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Latencies"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copyx"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| join kind=inner  (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId | extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2]) | where IPSegmentC ==\"{Select_SourceNetwork_B_IPSegment}\"\r\n| extend ShortPath=iff(UdpUse==1,\"Private\",iff(UdpUse==2,\"Public\",\"\"))\r\n| summarize [\"Avg. RTT\"]=avg(EstRoundTripTimeInMs),[\"Max. RTT\"]=max(EstRoundTripTimeInMs),[\"P90 RTT\"]=percentile(EstRoundTripTimeInMs,90),[\"Avg. Bandwidth\"]=avg(EstAvailableBandwidthKBps),[\"Max. Bandwidth\"]=max(EstAvailableBandwidthKBps),[\"P90 Bandwidth\"]=percentile(EstAvailableBandwidthKBps,90) by UserName, ShortPath\r\n| order by [\"Avg. RTT\"] desc\r\n",
        "size": 0,
        "title": "RTT and est. available Bandwidth by IP segment {Select_SourceNetwork_B_IPSegment}",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_SourceNetwork_B_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Latencies"
        },
        {
          "parameterName": "Select_SourceNetwork_B_IPSegment",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| join kind=inner  (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName ==\"{Select_SourceNetwork_B_UserName}\" and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) | extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])| where IPSegmentC ==\"{Select_SourceNetwork_B_IPSegment}\")  on CorrelationId\r\n| summarize [\"Avg. RTT/ms\"]=avg(EstRoundTripTimeInMs),[\"Max. RTT/ms\"]=max(EstRoundTripTimeInMs),[\"P90 RTT/ms\"]=percentile(EstRoundTripTimeInMs,90) by TimeGenerated\r\n",
        "size": 0,
        "showAnnotations": true,
        "title": "RTT for {Select_SourceNetwork_B_UserName} in {Select_SourceNetwork_B_IPSegment}",
        "timeContextFromParameter": "TimeRange",
        "timeBrushParameterName": "Brush_Latency_B",
        "timeBrushExportOnlyWhenBrushed": true,
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": [],
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Latencies"
        },
        {
          "parameterName": "Select_SourceNetwork_B_UserName",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "50",
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| join kind=inner (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName ==\"{Select_SourceNetwork_B_UserName}\" and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) | extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])| where IPSegmentC ==\"{Select_SourceNetwork_B_IPSegment}\")  on CorrelationId\r\n| summarize [\"Avg. Bandwidth/Bps\"]=avg(EstAvailableBandwidthKBps)*1024.0,[\"Max. Bandwidth/Bps\"]=max(EstAvailableBandwidthKBps)*1024.0,[\"P90 Bandwidth/Bps\"]=percentile(EstAvailableBandwidthKBps,90)*1024.0 by TimeGenerated\r\n",
        "size": 0,
        "showAnnotations": true,
        "title": "Est. available Bandwidth for {Select_SourceNetwork_B_UserName} in {Select_SourceNetwork_B_IPSegment}",
        "timeContext": {
          "durationMs": 43200000
        },
        "timeBrushParameterName": "Brush_Latency_B",
        "timeBrushExportOnlyWhenBrushed": true,
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "$gen_heatmap_Avg. RTT_1",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "$gen_heatmap_Avg. RTT_1",
            "sortOrder": 2
          }
        ],
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Latencies"
        },
        {
          "parameterName": "Select_SourceNetwork_B_UserName",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "50",
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {Brush_Latency_B} and HostPool in ('',{HostPool})\r\n| join kind=inner  (WVDConnections| where State ==\"Connected\" and UserName ==\"{Select_SourceNetwork_B_UserName}\" and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) | extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])| where IPSegmentC ==\"{Select_SourceNetwork_B_IPSegment}\")  on CorrelationId\r\n| summarize [\"Avg. RTT/ms\"]=avg(EstRoundTripTimeInMs),[\"Max. RTT/ms\"]=max(EstRoundTripTimeInMs),[\"P90 RTT/ms\"]=percentile(EstRoundTripTimeInMs,90) by TimeGenerated\r\n",
        "size": 0,
        "showAnnotations": true,
        "title": "RTT for {Select_SourceNetwork_B_UserName} in {Select_SourceNetwork_B_IPSegment}",
        "timeContext": {
          "durationMs": 43200000
        },
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "$gen_heatmap_Avg. RTT_1",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "$gen_heatmap_Avg. RTT_1",
            "sortOrder": 2
          }
        ],
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Latencies"
        },
        {
          "parameterName": "Select_SourceNetwork_B_UserName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "Brush_Latency_B",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "50",
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnectionNetworkData | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {Brush_Latency_B} and HostPool in ('',{HostPool})\r\n| join kind=inner  (WVDConnections| where State ==\"Connected\" and UserName ==\"{Select_SourceNetwork_B_UserName}\" and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) | extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])| where IPSegmentC ==\"{Select_SourceNetwork_B_IPSegment}\")  on CorrelationId\r\n| summarize [\"Avg. Bandwidth/Bps\"]=avg(EstAvailableBandwidthKBps)*1024.0,[\"Max. Bandwidth/Bps\"]=max(EstAvailableBandwidthKBps)*1024.0,[\"P90 Bandwidth/Bps\"]=percentile(EstAvailableBandwidthKBps,90)*1024.0 by TimeGenerated\r\n",
        "size": 0,
        "showAnnotations": true,
        "title": "Est. available Bandwidth for {Select_SourceNetwork_B_UserName} in {Select_SourceNetwork_B_IPSegment}",
        "timeContext": {
          "durationMs": 43200000
        },
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Avg. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Max. RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "P90 RTT",
              "formatter": 8,
              "formatOptions": {
                "min": 20,
                "max": 200,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "maximumFractionDigits": 0
                }
              }
            },
            {
              "columnMatch": "Avg. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Max. Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "P90 Bandwidth",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue",
                "customColumnWidthSetting": "150px"
              },
              "numberFormat": {
                "unit": 12,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "$gen_heatmap_Avg. RTT_1",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "$gen_heatmap_Avg. RTT_1",
            "sortOrder": 2
          }
        ],
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Latencies"
        },
        {
          "parameterName": "Select_SourceNetwork_B_UserName",
          "comparison": "isNotEqualTo"
        },
        {
          "parameterName": "Brush_Latency_B",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "50",
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "This chart shows information about the graphic performance of the selected host pool. The data are average data for all hosts in the pool. Right now, a host specifics metrics are not available via diagnostic logging."
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Graphic"
      },
      "customWidth": "100",
      "name": "text - 20 - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "let data=WVDConnectionGraphicsDataPreview | extend HostPool=tostring(split(_ResourceId,\"/\")[8] )\r\n| where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| summarize \r\n[\"Server skipped frames\"]=sum(ServerSkippedFramesPercentage), \r\n[\"Client skipped frames\"]=sum(ClientSkippedFramesPercentage),\r\n[\"Network skipped frames\"]=sum(NetworkSkippedFramesPercentage)\r\nby HostPool, bin(TimeGenerated,1m);\r\nlet dps=ceiling(toscalar(data|count)/5000.0);\r\ndata|summarize \r\n[\"Server skipped frames\"]=avg([\"Server skipped frames\"]), \r\n[\"Client skipped frames\"]=avg([\"Client skipped frames\"]),\r\n[\"Network skipped frames\"]=avg([\"Network skipped frames\"])\r\n by HostPool,bin(TimeGenerated,dps*1m)",
        "size": 0,
        "aggregation": 3,
        "title": "Graphic performance - Skipped frames",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "rowLimit": 1000,
          "filter": true
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "HostPool",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "Failed",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 2,
                "maximumSignificantDigits": 3
              }
            }
          },
          "rightContent": {
            "columnMatch": "Failed"
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0
        },
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 1,
              "options": {
                "style": "decimal",
                "useGrouping": true,
                "maximumFractionDigits": 1
              }
            }
          }
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Graphic"
      },
      "customWidth": "100",
      "showPin": true,
      "name": "query - 20 - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "let data=WVDConnectionGraphicsDataPreview | extend HostPool=tostring(split(_ResourceId,\"/\")[8] )\r\n| where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| summarize \r\n[\"Encoding delay server\"]=sum(EncodingDelayOnServerInMs), \r\n[\"Decoding delay client\"]=sum(DecodingTimeOnClientInMs),\r\n[\"Rendering time client\"]=sum(RenderingTimeOnClientInMs)\r\nby HostPool, bin(TimeGenerated,1m);\r\nlet dps=ceiling(toscalar(data|count)/5000.0);\r\ndata|summarize \r\n[\"Encoding delay server\"]=avg([\"Encoding delay server\"]), \r\n[\"Decoding delay client\"]=avg([\"Decoding delay client\"]),\r\n[\"Rendering time client\"]=avg([\"Rendering time client\"])\r\n by HostPool,bin(TimeGenerated,dps*1m)",
        "size": 0,
        "aggregation": 3,
        "title": "Coding & Rendering",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "rowLimit": 1000,
          "filter": true
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "HostPool",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "Failed",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 2,
                "maximumSignificantDigits": 3
              }
            }
          },
          "rightContent": {
            "columnMatch": "Failed"
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0
        },
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 23,
              "options": {
                "style": "decimal",
                "useGrouping": true,
                "maximumFractionDigits": 1
              }
            }
          }
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Graphic"
      },
      "customWidth": "100",
      "showPin": true,
      "name": "query - 20 - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "let data=WVDAgentHealthStatus | extend HostPool=tostring(split(_ResourceId,\"/\")[8] )\r\n| where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| summarize arg_max(TimeGenerated,*) by SessionHostName, bin(TimeGenerated,1m)\r\n| summarize Active=sum(toint(ActiveSessions)), Inactive=sum(toint(InactiveSessions)) by TimeGenerated;\r\nlet dps=ceiling(toscalar(data|count)/5000.0);\r\ndata|summarize Active=avg(Active), Inactive=avg(Inactive) by bin(TimeGenerated,dps*1m)\r\n",
        "size": 0,
        "aggregation": 3,
        "title": "Number of sessions (active & inactive)",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "rowLimit": 1000,
          "filter": true
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "HostPool",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "Failed",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 2,
                "maximumSignificantDigits": 3
              }
            }
          },
          "rightContent": {
            "columnMatch": "Failed"
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0
        },
        "chartSettings": {
          "showLegend": true
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Connections"
      },
      "customWidth": "100",
      "showPin": true,
      "name": "query - 20 - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDCheckpoints\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| where Name==\"RdpShellAppExecuted\" or Name==\"ShellReady\"\r\n| join kind=inner  (WVDConnections| where TimeGenerated {TimeRange} | summarize arg_max(TimeGenerated,*) by CorrelationId\r\n|   where State!~\"Completed\"\r\n    | project State,CorrelationId,SessionHostName) on CorrelationId\r\n| extend Process=split(Parameters.filename,\"\\\\\"), Type=iff(Name==\"ShellReady\",\"Desktop\",\"Remote App\")\r\n| extend Application=iff(Name==\"ShellReady\",\"Desktop\",replace_string(tostring(Process[array_length(Process)-1]),\"\\\"\",\"\"))\r\n| project UserName, HostPool, SessionHost=SessionHostName, [\"Start time\"]=TimeGenerated, Type, Application",
        "size": 0,
        "aggregation": 3,
        "title": "Active Sessions (no disconnected and closed)",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "SessionHost",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "SessionHost",
            "sortOrder": 1
          }
        ],
        "tileSettings": {
          "titleContent": {
            "columnMatch": "HostPool",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "Failed",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 2,
                "maximumSignificantDigits": 3
              }
            }
          },
          "rightContent": {
            "columnMatch": "Failed"
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Connections"
      },
      "customWidth": "100",
      "showPin": true,
      "name": "query - 20 - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "let data=WVDAgentHealthStatus | extend HostPool=tostring(split(_ResourceId,\"/\")[8] )\r\n| where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| summarize arg_max(TimeGenerated,*) by SessionHostName, bin(TimeGenerated,1m)\r\n| summarize All=count() by TimeGenerated;\r\nlet dps=ceiling(toscalar(data|count)/5000.0);\r\ndata|summarize All=avg(All) by bin(TimeGenerated,dps*1m)",
        "size": 0,
        "aggregation": 3,
        "title": "Number of session hosts",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "linechart",
        "gridSettings": {
          "rowLimit": 1000,
          "filter": true
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "HostPool",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "Failed",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 2,
                "maximumSignificantDigits": 3
              }
            }
          },
          "rightContent": {
            "columnMatch": "Failed"
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0
        },
        "chartSettings": {
          "showLegend": true
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Connections"
      },
      "customWidth": "100",
      "showPin": true,
      "name": "query - 20 - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDErrors | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8] \r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| summarize Success=countif(CodeSymbolic==\"\"), Errors=countif(CodeSymbolic!=\"\") \r\n| extend Temp = pack(\"Success\",Success,\"Errors\",Errors )\r\n| mv-expand kind=array Temp\r\n| project Action=tostring(Temp[0]), Count=toint(Temp[1])",
        "size": 0,
        "title": "Brokered sessions",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "piechart",
        "gridSettings": {
          "rowLimit": 1000,
          "filter": true
        },
        "tileSettings": {
          "titleContent": {
            "columnMatch": "HostPool",
            "formatter": 1
          },
          "leftContent": {
            "columnMatch": "Failed",
            "formatter": 12,
            "formatOptions": {
              "palette": "auto"
            },
            "numberFormat": {
              "unit": 17,
              "options": {
                "style": "decimal",
                "maximumFractionDigits": 2,
                "maximumSignificantDigits": 3
              }
            }
          },
          "rightContent": {
            "columnMatch": "Failed"
          },
          "showBorder": true
        },
        "graphSettings": {
          "type": 0
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Connections"
      },
      "customWidth": "50",
      "showPin": true,
      "name": "query - 20"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "// Duration for the login process from the WVD ARM backend. This includes all steps between clicking the application icon to get notified by the RD agent that the session is established (not for reconnected sessions). \r\n// This includes entering the credentials for the session hosts (if not saved). Note: This inculdes re-connected sessions and no failed connections\r\nWVDConnections \r\n| extend HostPool=split(_ResourceId,\"/\")[8] \r\n| join kind=leftouter (WVDErrors) on CorrelationId\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector})) and (State ==\"Connected\" or State == \"Started\")\r\n| extend Multi=split(_ResourceId, \"/\")\r\n| project ResourceAlias, HostPool=toupper(HP=Multi[8]), SessionHost=SessionHostName , UserName , CorrelationId, TimeGenerated, ResourceGroup=Multi[4], DesktopGroup_s=toupper(strcat(RG=Multi[4],\".\", HP=Multi[8])) \r\n| order by TimeGenerated desc \r\n| summarize StartTime=min(TimeGenerated), max(TimeGenerated) by CorrelationId, User=UserName, HostPool, SessionHost\r\n| extend Duration=max_TimeGenerated-StartTime | where Duration !=0 \r\n| project StartTime, User, HostPool, SessionHost, Duration, CorrelationId\r\n| summarize [\"Duration in seconds\"]=avg(Duration/1s) by HostPool",
        "size": 0,
        "title": "Session login time (s)",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "barchart",
        "gridSettings": {
          "filter": true
        },
        "chartSettings": {
          "showLegend": true,
          "ySettings": {
            "numberFormatSettings": {
              "unit": 24,
              "options": {
                "style": "decimal",
                "useGrouping": false
              }
            }
          }
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Connections"
      },
      "customWidth": "50",
      "showPin": true,
      "name": "query - 20 - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "This chart shows the number of successful and un-successful brokered sessions by host pools."
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Connections"
      },
      "customWidth": "50",
      "name": "text - 20"
    },
    {
      "type": 1,
      "content": {
        "json": "This chart shows the average login time for users to the host pools. The duration covers all steps between clicking the application icon up to notification of the RD agent that the session is ready. This includes all successful logins and reconnections to sessions."
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Connections"
      },
      "customWidth": "50",
      "name": "text - 20 - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "----------\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "name": "text - 25"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDAgentHealthStatus | extend HostPool=tostring(split(_ResourceId,\"/\")[8] )\r\n| where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| where EndpointState==\"Unhealthy\" and SessionHostHealthCheckResult !=\"\"\r\n| mv-expand SessionHostHealthCheckResult\r\n| where SessionHostHealthCheckResult.HealthCheckResult!=1\r\n| project HostPool,SessionHostName,TimeGenerated,Message=SessionHostHealthCheckResult.AdditionalFailureDetails.Message, Date=bin(TimeGenerated,1h)\r\n",
        "size": 1,
        "title": "Unhealthy session hosts (# of error messages)",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "series",
        "exportParameterName": "Select_ErrorSourceSignature",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "filter": true,
          "hierarchySettings": {
            "treeType": 1,
            "groupBy": [
              "Date",
              "SessionHostName"
            ]
          }
        },
        "mapSettings": {
          "locInfo": "AzureResource",
          "locInfoColumn": "SessionHostResourceId"
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "customWidth": "100",
      "name": "query - 12 - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "----------\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "name": "text - 26 - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDErrors \r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId  // join the latest WVDConnection\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}))\r\n| extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])\r\n| summarize Count=count() by CodeSymbolic",
        "size": 1,
        "title": "Errors by reason",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "series",
        "exportParameterName": "Select_ErrorSourceSignature",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "piechart",
        "gridSettings": {
          "filter": true
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "customWidth": "50",
      "name": "query - 12"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDErrors \r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId  // join the latest WVDConnection\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}))\r\n| extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])\r\n| summarize Count=count() by Source",
        "size": 1,
        "title": "Errors by source",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "series",
        "exportParameterName": "Select_ErrorSourceSignature",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "piechart",
        "gridSettings": {
          "filter": true
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "customWidth": "50",
      "name": "query - 13"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDErrors | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| where Source==\"{Select_ErrorSourceSignature}\" or CodeSymbolic==\"{Select_ErrorSourceSignature}\"\r\n| summarize Errors=count() by CodeSymbolic\r\n| order by Errors desc\r\n",
        "size": 1,
        "title": "Errors by source/reason: {Select_ErrorSourceSignature}",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "CodeSymbolic",
        "exportParameterName": "Select_CodeSymbolicSignature",
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Signature",
              "formatter": 5
            },
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Count",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ],
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Logins"
        },
        {
          "parameterName": "Select_ErrorSourceSignature",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "100",
      "name": "query - 13 - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDErrors | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and CodeSymbolic==\"{Select_CodeSymbolicSignature}\"\r\n| where Source==\"{Select_ErrorSourceSignature}\" or CodeSymbolic==\"{Select_ErrorSourceSignature}\"\r\n| summarize Errors=count() by Message\r\n| order by Errors desc\r\n",
        "size": 1,
        "title": "Errors by source and symbolic: {Select_ErrorSourceSignature} / {Select_CodeSymbolicSignature}",
        "timeContextFromParameter": "TimeRange",
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Signature",
              "formatter": 5
            },
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Count",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ],
          "filter": true,
          "sortBy": [
            {
              "itemKey": "$gen_bar_Errors_1",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "$gen_bar_Errors_1",
            "sortOrder": 2
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Logins"
        },
        {
          "parameterName": "Select_CodeSymbolicSignature",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "100",
      "name": "query - 13 - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "----------\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "name": "text - 26"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDErrors | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])\r\n| extend Signature=strcat(ClientType,\"#\",ClientVersion)\r\n| summarize Success=countif(CodeSymbolic==\"\"), Errors=countif(CodeSymbolic!=\"\") by ClientType, ClientVersion, Signature\r\n| extend [\"Error rate\"]=Errors*1.0/(Success+Errors)\r\n| order by Errors\r\n",
        "size": 1,
        "title": "Errors by client",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "Signature",
        "exportParameterName": "Select_SourceSignature",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Signature",
              "formatter": 5
            },
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Count",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "$gen_bar_Error rate_5",
              "sortOrder": 2
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "$gen_bar_Error rate_5",
            "sortOrder": 2
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "customWidth": "33",
      "name": "query - 13 - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDErrors | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])\r\n| summarize Success=countif(CodeSymbolic==\"\"), Errors=countif(CodeSymbolic!=\"\") by [\"IP-Segment (C)\"]=IPSegmentC\r\n| extend [\"Error rate\"]=Errors*1.0/(Success+Errors)\r\n| order by Errors",
        "size": 1,
        "title": "Errors by IP segment (class C)",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "IP-Segment (C)",
        "exportParameterName": "Select_SourceSignature",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "customWidth": "33",
      "name": "query - 13 - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDErrors | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])\r\n| summarize Success=countif(CodeSymbolic==\"\"), Errors=countif(CodeSymbolic!=\"\") by Version=SessionHostAgentVersion\r\n| extend [\"Error rate\"]=Errors*1.0/(Success+Errors)\r\n| order by Errors",
        "size": 1,
        "title": "Errors by Session Host Agent",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "Version",
        "exportParameterName": "Select_SourceSignature",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "filter": true
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "customWidth": "33",
      "name": "query - 13 - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDErrors | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2]),ClientSignature=strcat(ClientType,\"#\",ClientVersion)\r\n| where IPSegmentC==\"{Select_SourceSignature}\" or ClientSignature==\"{Select_SourceSignature}\" or SessionHostAgentVersion==\"{Select_SourceSignature}\"\r\n| extend CodeSymbolic=iff(CodeSymbolic==\"\",\"Success\",CodeSymbolic)\r\n| where CodeSymbolic!=\"Success\"\r\n| summarize Count=count() by CodeSymbolic",
        "size": 0,
        "title": "Errors raised by category (in 15m bins) for {Select_SourceSignature}",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "series",
        "exportParameterName": "Select_DetailCodeSymbolic",
        "exportDefaultValue": "-",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "barchart",
        "gridSettings": {
          "filter": true
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Logins"
        },
        {
          "parameterName": "Select_SourceSignature",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "30",
      "name": "query - 14 - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDErrors | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2]),ClientSignature=strcat(ClientType,\"#\",ClientVersion)\r\n| where IPSegmentC==\"{Select_SourceSignature}\" or ClientSignature==\"{Select_SourceSignature}\" or SessionHostAgentVersion==\"{Select_SourceSignature}\"\r\n| where \"{Select_DetailCodeSymbolic}\"==\"-\" or \"{Select_DetailCodeSymbolic}\"==\"\" or CodeSymbolic==\"{Select_DetailCodeSymbolic}\"\r\n| extend CodeSymbolic=iff(CodeSymbolic==\"\",\"Success\",CodeSymbolic)\r\n| summarize Count=count() by bin(TimeGenerated, 15m), CodeSymbolic",
        "size": 0,
        "title": "Errors raised by time (in 15m bins) for {Select_SourceSignature}   {Select_DetailCodeSymbolic}",
        "timeContextFromParameter": "TimeRange",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "scatterchart",
        "gridSettings": {
          "filter": true
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Logins"
        },
        {
          "parameterName": "Select_SourceSignature",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "70",
      "name": "query - 14"
    },
    {
      "type": 1,
      "content": {
        "json": "----------\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "name": "text - 29"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDErrors \r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}))\r\n| summarize Count=count() by bin(TimeGenerated, 15m), CodeSymbolic",
        "size": 0,
        "title": "Errors raised by time (in 15m bins)",
        "timeContextFromParameter": "TimeRange",
        "timeBrushParameterName": "Brush_Overview",
        "timeBrushExportOnlyWhenBrushed": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "scatterchart",
        "gridSettings": {
          "filter": true
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "name": "query - 14 - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDErrors \r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {Brush_Overview} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}))\r\n| summarize Count=count() by TimeGenerated, CodeSymbolic",
        "size": 0,
        "title": "Errors raised by selected time frame",
        "timeContextFromParameter": "TimeRange",
        "timeBrushParameterName": "Brush_OverviewDetail",
        "timeBrushExportOnlyWhenBrushed": true,
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "scatterchart",
        "gridSettings": {
          "filter": true
        }
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Logins"
        },
        {
          "parameterName": "Brush_Overview",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "query - 14 - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDErrors\r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {Brush_OverviewDetail} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| project CorrelationId, TimeStamp=TimeGenerated, User=UserName, Activity=ActivityType, Source, CodeSymbolic, Message, [\"Service Error\"]=ServiceError, [\"Client OS\"]=ClientOS, [\"Client Version\"]=ClientVersion, [\"Client Type\"]=ClientType, [\"Client IP-Address\"]=ClientIPAddress, [\"Connection Type\"]=ConnectionType, [\"App or Desktop Name\"]=ResourceAlias, [\"Session Host Name\"]=SessionHostName, [\"Session Host IP-Address\"]=SessionHostIPAddress, [\"Session Host OS-Version\"]=SessionHostOSVersion, [\"Session Host OS-Description\"]=SessionHostOSDescription, [\"Session Host Agent-Version\"]=SessionHostAgentVersion, [\"Session Host Session-Id\"]=SessionHostSessionId, [\"Gateway Region\"]=GatewayRegion, [\"Is UDP used\"]=UdpUse\r\n| order by TimeStamp asc\r\n\r\n",
        "size": 1,
        "title": "Errors raised by selected time frame - Level 2",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "CorrelationId",
        "exportParameterName": "Select_DetailBrushCorrelationId",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "CorrelationId",
              "formatter": 5
            },
            {
              "columnMatch": "Signature",
              "formatter": 5
            },
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Count",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "CodeSymbolic",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "CodeSymbolic",
            "sortOrder": 1
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Logins"
        },
        {
          "parameterName": "Brush_OverviewDetail",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "100",
      "name": "query - 13 - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDCheckpoints\r\n| where  TimeGenerated {Brush_OverviewDetail} and CorrelationId==\"{Select_DetailBrushCorrelationId}\"\r\n| project CorrelationId, TimeStamp=TimeGenerated, User=UserName, Activity=ActivityType, Source, Details=Parameters\r\n| order by TimeStamp asc\r\n\r\n\r\n",
        "size": 1,
        "title": "Trace by selected event",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "CorrelationId",
              "formatter": 5
            },
            {
              "columnMatch": "Signature",
              "formatter": 5
            },
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Count",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Logins"
        },
        {
          "parameterName": "Select_DetailBrushCorrelationId",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "100",
      "name": "query - 13 - Copy - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "----------\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "name": "text - 27"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDErrors | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| extend IPSegmentC=strcat(split(ClientSideIPAddress,\".\")[0],\".\",split(ClientSideIPAddress,\".\")[1],\".\",split(ClientSideIPAddress,\".\")[2])\r\n| extend Signature=strcat(ClientType,\"#\",ClientVersion)\r\n| summarize SuccessD=countif(CodeSymbolic==\"\"), ErrorsD=countif(CodeSymbolic!=\"\") by UserName, bin(TimeGenerated,1d)\r\n| summarize Success=avg(SuccessD), Errors=avg(ErrorsD) by UserName\r\n| extend [\"Error rate\"]=Errors*1.0/(Success+Errors)\r\n| order by [\"Error rate\"]\r\n",
        "size": 0,
        "title": "Average Errors per User per day",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_AverUserUser",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 0,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 0,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Signature",
              "formatter": 5
            },
            {
              "columnMatch": "Count",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "customWidth": "100",
      "name": "query - 13 - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDErrors\r\n| summarize arg_max(TimeGenerated, *) by CorrelationId  // workaround to filter \"double-entries\"\r\n| join kind=leftouter (\r\n    WVDConnections | summarize arg_max(TimeGenerated, *) by CorrelationId\r\n) on CorrelationId\r\n| extend HostPool=split(_ResourceId,\"/\")[8]\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Unspecified error\",\"Unspecified error\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The system cannot open the file.\",\"The system cannot open the file.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"The RPC server is unavailable.\",\"The RPC server is unavailable.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No such interface supported\",\"No such interface supported\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"No process is on the other end of the pipe.\",\"No process is on the other end of the pipe.\",CodeSymbolic) // workaround\r\n| extend CodeSymbolic=iff(CodeSymbolic startswith_cs \"Operation aborted\",\"\tOperation aborted\",CodeSymbolic) // workaround\r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})) and (column_ifexists(\"CodeSymbolic\",\"*\")==\"*\" or \"{ErrorSelector}\"==\"\" or column_ifexists(\"CodeSymbolic\",\"\") in ('' {ErrorSelector}) or CodeSymbolic==\"\")\r\n| where UserName==\"{Select_AverUserUser}\"\r\n| project CorrelationId, TimeStamp=TimeGenerated, User=UserName, Activity=ActivityType, Source, CodeSymbolic, Message, [\"Service Error\"]=ServiceError, [\"Client OS\"]=ClientOS, [\"Client Version\"]=ClientVersion, [\"Client Type\"]=ClientType, [\"Client IP-Address\"]=ClientIPAddress, [\"Connection Type\"]=ConnectionType, [\"App or Desktop Name\"]=ResourceAlias, [\"Session Host Name\"]=SessionHostName, [\"Session Host IP-Address\"]=SessionHostIPAddress, [\"Session Host OS-Version\"]=SessionHostOSVersion, [\"Session Host OS-Description\"]=SessionHostOSDescription, [\"Session Host Agent-Version\"]=SessionHostAgentVersion, [\"Session Host Session-Id\"]=SessionHostSessionId, [\"Gateway Region\"]=GatewayRegion, [\"Is UDP used\"]=UdpUse\r\n| order by TimeStamp asc\r\n\r\n",
        "size": 1,
        "title": "Errors raised by {Select_AverUserUser}",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "CorrelationId",
        "exportParameterName": "Select_AverUserUserDetail",
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "CorrelationId",
              "formatter": 5
            },
            {
              "columnMatch": "Signature",
              "formatter": 5
            },
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Count",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "CodeSymbolic",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "CodeSymbolic",
            "sortOrder": 1
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Logins"
        },
        {
          "parameterName": "Select_AverUserUser",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "100",
      "name": "query - 13 - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDCheckpoints\r\n| where  TimeGenerated {TimeRange} and CorrelationId==\"{Select_AverUserUserDetail}\"\r\n| project CorrelationId, TimeStamp=TimeGenerated, User=UserName, Activity=ActivityType, Source, Details=Parameters\r\n| order by TimeStamp asc\r\n\r\n\r\n",
        "size": 1,
        "title": "Trace by selected event from {Select_AverUserUser}",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "CorrelationId",
              "formatter": 5
            },
            {
              "columnMatch": "Signature",
              "formatter": 5
            },
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Count",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "Logins"
        },
        {
          "parameterName": "Select_AverUserUserDetail",
          "comparison": "isNotEqualTo"
        }
      ],
      "customWidth": "100",
      "name": "query - 13 - Copy - Copy - Copy - Copy"
    },
    {
      "type": 1,
      "content": {
        "json": "----------\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "name": "text - 28"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDAgentHealthStatus \r\n| extend HostPool=split(_ResourceId,\"/\")[8] \r\n| where  TimeGenerated {TimeRange} and HostPool in ('',{HostPool}) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector}))\r\n| extend SessionHostResourceIdUx=strcat(_ResourceId,\"/SessionHosts/\",SessionHostName)\r\n| order by SessionHostResourceIdUx, StatusTimeStamp\r\n| extend AgentVersionPrev=prev(AgentVersion), SxSStackVersionPrev=prev(SxSStackVersion)\r\n| extend Change=SessionHostResourceIdUx==prev(SessionHostResourceIdUx) and (AgentVersion!=AgentVersionPrev or SxSStackVersion!=SxSStackVersionPrev)\r\n| where Change and AgentVersionPrev !=\"\" and SessionHostResourceIdUx!=\"\"\r\n| project Timestamp=iff(StatusTimeStamp!=\"\",StatusTimeStamp,TimeGenerated),[\"Sessionhost\"]=SessionHostName,OSVersion,[\"Agent version\"]=AgentVersion,[\"Agent version prev.\"]=AgentVersionPrev,[\"SxSStack version\"]=SxSStackVersion,[\"SxSStack version prev\"]=SxSStackVersionPrev\r\n| order by Timestamp\r\n\r\n",
        "size": 0,
        "title": "Agent Updates on Session Hosts",
        "timeContextFromParameter": "TimeRange",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Signature",
              "formatter": 5
            },
            {
              "columnMatch": "Success",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Errors",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Error rate",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              },
              "numberFormat": {
                "unit": 1,
                "options": {
                  "style": "percent",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Count",
              "formatter": 4,
              "formatOptions": {
                "palette": "blue"
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "Logins"
      },
      "customWidth": "100",
      "name": "query - 13 - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDCheckpoints| where Name ==\"LogonDelay\" | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| extend LogonType=Parameters.LogonType,WinLogon_Logon_GPClient=todouble(Parameters.WinLogon_Logon_GPClient),WinLogon_Logon_Profiles=todouble(Parameters.WinLogon_Logon_Profiles),WinLogon_Logon_Sens=todouble(Parameters.WinLogon_Logon_Sens),WinLogon_Logon_SessionEnv=todouble(Parameters.WinLogon_Logon_SessionEnv),WinLogon_Logon_TermSrv=todouble(Parameters.WinLogon_Logon_TermSrv),WinLogon_Logon_frxsvc=todouble(Parameters.WinLogon_Logon_frxsvc),WinLogon_StartShell=todouble(Parameters.WinLogon_StartShell),WinLogon_Logon=todouble(Parameters.WinLogon_Logon),WinLogon_Total=todouble(Parameters.WinLogon_Total), AuthenticateUser=todouble(Parameters.AuthenticateUser)\r\n| join kind=inner  (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId\r\n| summarize [\"Windows Logon - Total (avg)\"]=avg(WinLogon_Total), [\"Windows Logon - Total (P90)\"]=percentile(WinLogon_Total,90) by UserName\r\n| order by [\"Windows Logon - Total (avg)\"] desc\r\n\r\n\r\n",
        "size": 0,
        "title": "Logon Timing by User",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_LogonTiming_A_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Windows Logon - Total (avg)",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Windows Logon - Total (P90)",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": []
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "LogonTiming"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDCheckpoints| where Name ==\"LogonDelay\" and UserName =~\"{Select_LogonTiming_A_UserName}\" | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| extend LogonType=Parameters.LogonType,WinLogon_Logon_GPClient=todouble(Parameters.WinLogon_Logon_GPClient),WinLogon_Logon_Profiles=todouble(Parameters.WinLogon_Logon_Profiles),WinLogon_Logon_Sens=todouble(Parameters.WinLogon_Logon_Sens),WinLogon_Logon_SessionEnv=todouble(Parameters.WinLogon_Logon_SessionEnv),WinLogon_Logon_TermSrv=todouble(Parameters.WinLogon_Logon_TermSrv),WinLogon_Logon_frxsvc=todouble(Parameters.WinLogon_Logon_frxsvc),WinLogon_StartShell=todouble(Parameters.WinLogon_StartShell),WinLogon_Logon=todouble(Parameters.WinLogon_Logon),WinLogon_Total=todouble(Parameters.WinLogon_Total), AuthenticateUser=todouble(Parameters.AuthenticateUser)\r\n| join kind=inner  (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId\r\n| summarize [\"Authentication\"]=avg(AuthenticateUser), [\"Logon - Total\"]=avg(WinLogon_Total), [\"Logon - GPO\"]=avg(WinLogon_Logon_GPClient), [\"Logon - Profile\"]=avg(WinLogon_Logon_Profiles), [\"Logon - Event Notification\"]=avg(WinLogon_Logon_Sens), [\"Logon - Env.\"]=avg(WinLogon_Logon_SessionEnv), [\"Logon - TS Service\"]=avg(WinLogon_Logon_TermSrv), [\"Logon - FRXSrv\"]=avg(WinLogon_Logon_frxsvc), [\"Logon - Start Shell\"]=avg(WinLogon_StartShell) by UserName, SessionHost=SessionHostName, tostring(HostPool), TimeStamp=TimeGenerated\r\n| order by [\"Logon - Total\"] desc\r\n\r\n\r\n",
        "size": 0,
        "title": "Logon Timing by User {Select_LogonTiming_A_UserName}",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_LogonTiming_B_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Authentication",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Total",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - GPO",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Profile",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Event Notification",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Env.",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - TS Service",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - FRXSrv",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Start Shell",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true,
          "sortBy": [
            {
              "itemKey": "TimeStamp",
              "sortOrder": 1
            }
          ]
        },
        "sortBy": [
          {
            "itemKey": "TimeStamp",
            "sortOrder": 1
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "selectedTab",
          "comparison": "isEqualTo",
          "value": "LogonTiming"
        },
        {
          "parameterName": "Select_LogonTiming_A_UserName",
          "comparison": "isNotEqualTo"
        }
      ],
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "WVDCheckpoints| where Name ==\"LogonDelay\" | extend HostPool=split(_ResourceId,\"/\")[8] | where TimeGenerated {TimeRange} and HostPool in ('',{HostPool})\r\n| extend LogonType=Parameters.LogonType,WinLogon_Logon_GPClient=todouble(Parameters.WinLogon_Logon_GPClient),WinLogon_Logon_Profiles=todouble(Parameters.WinLogon_Logon_Profiles),WinLogon_Logon_Sens=todouble(Parameters.WinLogon_Logon_Sens),WinLogon_Logon_SessionEnv=todouble(Parameters.WinLogon_Logon_SessionEnv),WinLogon_Logon_TermSrv=todouble(Parameters.WinLogon_Logon_TermSrv),WinLogon_Logon_frxsvc=todouble(Parameters.WinLogon_Logon_frxsvc),WinLogon_StartShell=todouble(Parameters.WinLogon_StartShell),WinLogon_Logon=todouble(Parameters.WinLogon_Logon),WinLogon_Total=todouble(Parameters.WinLogon_Total), AuthenticateUser=todouble(Parameters.AuthenticateUser)\r\n| join kind=inner  (WVDConnections| where TimeGenerated {TimeRange} and State ==\"Connected\" and UserName !=\"\" and (\"{UserSelector}\"==\"\" or UserName in ('' {UserSelector})) and (column_ifexists(\"SessionHostName\",\"*\")==\"*\" or \"{SessionHostSelector}\"==\"\" or column_ifexists(\"SessionHostName\",\"\") in ('' {SessionHostSelector})))  on CorrelationId\r\n| summarize [\"Authentication\"]=avg(AuthenticateUser), [\"Logon - Total\"]=avg(WinLogon_Total), [\"Logon - GPO\"]=avg(WinLogon_Logon_GPClient), [\"Logon - Profile\"]=avg(WinLogon_Logon_Profiles), [\"Logon - Event Notification\"]=avg(WinLogon_Logon_Sens), [\"Logon - Env.\"]=avg(WinLogon_Logon_SessionEnv), [\"Logon - TS Service\"]=avg(WinLogon_Logon_TermSrv), [\"Logon - FRXSrv\"]=avg(WinLogon_Logon_frxsvc), [\"Logon - Start Shell\"]=avg(WinLogon_StartShell) by  Time=bin(TimeGenerated1,1d)\r\n| extend [\"Logon - remaining\"]=[\"Logon - Total\"]-[\"Logon - GPO\"]-[\"Logon - Profile\"]-[\"Logon - Event Notification\"]-[\"Logon - Env.\"]-[\"Logon - TS Service\"]-[\"Logon - FRXSrv\"]-[\"Logon - Start Shell\"]\r\n| extend [\"Logon - remaining\"]=iff([\"Logon - remaining\"]<0,0.0,[\"Logon - remaining\"])\r\n| project-away [\"Logon - Total\"]\r\n\r\n\r\n",
        "size": 0,
        "title": "Logon Timing - daily average (in ms)",
        "timeContextFromParameter": "TimeRange",
        "exportFieldName": "UserName",
        "exportParameterName": "Select_LogonTiming_B_UserName",
        "showExportToExcel": true,
        "exportToExcelOptions": "all",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces",
        "visualization": "categoricalbar",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Authentication",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Total",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - GPO",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Profile",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Event Notification",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Env.",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - TS Service",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - FRXSrv",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            },
            {
              "columnMatch": "Logon - Start Shell",
              "formatter": 8,
              "formatOptions": {
                "min": 0,
                "max": 180000,
                "palette": "greenRed"
              },
              "numberFormat": {
                "unit": 23,
                "options": {
                  "style": "decimal",
                  "minimumFractionDigits": 1,
                  "maximumFractionDigits": 1
                }
              }
            }
          ],
          "rowLimit": 1000,
          "filter": true
        },
        "sortBy": [],
        "chartSettings": {
          "xSettings": {
            "numberFormatSettings": {
              "unit": 23,
              "options": {
                "style": "decimal",
                "useGrouping": true,
                "maximumFractionDigits": 1,
                "minimumSignificantDigits": 1
              }
            }
          }
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "LogonTiming"
      },
      "name": "query - 13 - Copy - Copy - Copy - Copy - Copy - Copy"
    }
  ],
  "fallbackResourceIds": [
    "Azure Monitor"
  ],
  "fromTemplateId": "ArmTemplates-/subscriptions/2dd6d8b6-f593-4aba-82e4-eb052c568372/resourceGroups/shared-services-rg/providers/microsoft.insights/workbooktemplates/750ec0fd-74d1-4e80-be97-3001485303e8",
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}